
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Maternal Smoking and Birth Weight &#8212; Practical Data Science</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput,
div.nbinput div.prompt,
div.nbinput div.input_area,
div.nbinput div[class*=highlight],
div.nbinput div[class*=highlight] pre,
div.nboutput,
div.nbinput div.prompt,
div.nbinput div.output_area,
div.nboutput div[class*=highlight],
div.nboutput div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput,
div.nboutput {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput,
    div.nboutput {
        flex-direction: column;
    }
}

/* input container */
div.nbinput {
    padding-top: 5px;
}

/* last container */
div.nblast {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput div.prompt,
div.nboutput div.prompt {
    min-width: 5ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput div.prompt,
    div.nboutput div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput div.prompt pre,
div.nboutput div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput div.input_area,
div.nboutput div.output_area {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput div.input_area,
    div.nboutput div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    background: #f5f5f5;
}

/* override MathJax center alignment in output cells */
div.nboutput div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput div.math p {
    text-align: left;
}

/* standard error */
div.nboutput div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
</style>
<div class="section" id="Maternal-Smoking-and-Birth-Weight">
<h1>Maternal Smoking and Birth Weight<a class="headerlink" href="#Maternal-Smoking-and-Birth-Weight" title="Permalink to this headline">¶</a></h1>
<p>For these exercises, we will borrow some data and exercises from another <a class="reference external" href="https://ids-702-f19.github.io/Course-Website/hw/hw-02.html">MIDS course on Statistical Modeling</a>:</p>
<p>These days, it is widely understood that mothers who smoke during pregnancy risk exposing their babies to many health problems. This was not common knowledge fifty years ago. One of the first studies that addressed the issue of pregnancy and smoking was the Child Health and Development Studies, a comprehensive study of all babies born between 1960 and 1967 at the Kaiser Foundation Hospital in Oakland, CA. The original reference for the study is Yerushalmy (1964, American Journal of Obstetrics
and Gynecology, pp. 505-518). The data and a summary of the study are in Nolan and Speed (2000, Stat Labs, Chapter 10) and can be found at <a class="reference external" href="https://www.stat.berkeley.edu/users/statlabs/">the book’s website.</a></p>
<p>There were about 15,000 families in the study. We will only analyze a subset of the data, in particular 1236 male single births where the baby lived at least 28 days. The researchers interviewed mothers early in their pregnancy to collect information on socioeconomic and demographic characteristics, including an indicator of whether the mother smoked during pregnancy. The variables in the dataset are described in the <a class="reference external" href="https://ids-702-f19.github.io/Course-Website/hw/hw-02.html">code book
here</a>. In this exercise, we will attempt to use this data to answer the following questions:</p>
<ol class="arabic simple">
<li><p>Do mothers who smoke tend to give birth to babies with lower weights than mothers who do not smoke?</p></li>
<li><p>What is a likely range for the difference in birth weights for smokers and non-smokers?</p></li>
<li><p>Is there any evidence that the association between smoking and birth weight differs by mother’s race? If so, characterize those differences.</p></li>
<li><p>Are there other interesting associations with birth weight that are worth mentioning?</p></li>
</ol>
<p><strong>(1)</strong> Load the data “smoking.csv”, which includes information on both biometrics of infants at birth, and information on mothers (variables prefixed with the letter “m”), from <a class="reference external" href="https://github.com/nickeubank/MIDS_Data">this MIDS repo</a>. (Yup, I’m giving you CLEAN DATA! I think this is the only time I’ve done this in this course! Enjoy it. :)).</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="n">smoking_and_bw</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://media.githubusercontent.com/media/nickeubank/MIDS_Data/master/smoking.csv&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">smoking_and_bw</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>date</th>
      <th>gestation</th>
      <th>bwt.oz</th>
      <th>parity</th>
      <th>mrace</th>
      <th>mage</th>
      <th>med</th>
      <th>mht</th>
      <th>mpregwt</th>
      <th>inc</th>
      <th>smoke</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>4604</td>
      <td>1598</td>
      <td>148</td>
      <td>116</td>
      <td>7</td>
      <td>7</td>
      <td>28</td>
      <td>1</td>
      <td>66</td>
      <td>135</td>
      <td>2</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>7435</td>
      <td>1527</td>
      <td>181</td>
      <td>110</td>
      <td>7</td>
      <td>7</td>
      <td>27</td>
      <td>1</td>
      <td>64</td>
      <td>133</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>7722</td>
      <td>1563</td>
      <td>204</td>
      <td>55</td>
      <td>11</td>
      <td>7</td>
      <td>35</td>
      <td>3</td>
      <td>65</td>
      <td>140</td>
      <td>6</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2026</td>
      <td>1503</td>
      <td>225</td>
      <td>132</td>
      <td>4</td>
      <td>7</td>
      <td>28</td>
      <td>2</td>
      <td>67</td>
      <td>148</td>
      <td>3</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>3553</td>
      <td>1638</td>
      <td>233</td>
      <td>105</td>
      <td>4</td>
      <td>7</td>
      <td>34</td>
      <td>3</td>
      <td>61</td>
      <td>130</td>
      <td>3</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">smoking_and_bw</span><span class="o">.</span><span class="n">smoke</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>0    466
1    403
Name: smoke, dtype: int64
</pre></div>
</div>
</div>
<p><strong>(2)</strong> Start by plotting the relationship between infant weight at birth and gestation (length of pregnancy (in days) at time of birth) for both children who smoke and those who do not. Limit attention to children who reach at least 225 days of gestation (there aren’t really any observations for parents who smoke for less than that, so we don’t get common support). Does it seem like birthweights tend to be lower for the children of parents who smoke at a given gestational period?</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">smoking_and_bw</span><span class="p">[</span><span class="s1">&#39;smoke&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Categorical</span><span class="p">(</span><span class="n">smoking_and_bw</span><span class="p">[</span><span class="s1">&#39;smoke&#39;</span><span class="p">])</span>
<span class="kn">import</span> <span class="nn">plotnine</span> <span class="k">as</span> <span class="nn">p9</span>
<span class="n">g</span> <span class="o">=</span> <span class="p">(</span><span class="n">p9</span><span class="o">.</span><span class="n">ggplot</span><span class="p">(</span><span class="n">smoking_and_bw</span><span class="p">[</span><span class="n">smoking_and_bw</span><span class="o">.</span><span class="n">gestation</span> <span class="o">&gt;</span> <span class="mi">225</span><span class="p">],</span> <span class="n">p9</span><span class="o">.</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;gestation&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;bwt.oz&#39;</span><span class="p">,</span>
               <span class="n">group</span><span class="o">=</span><span class="s1">&#39;smoke&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;smoke&#39;</span><span class="p">)</span>
              <span class="p">)</span>
     <span class="o">+</span> <span class="n">p9</span><span class="o">.</span><span class="n">geom_point</span><span class="p">()</span>
     <span class="o">+</span> <span class="n">p9</span><span class="o">.</span><span class="n">geom_smooth</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s1">&#39;lm&#39;</span><span class="p">)</span>
    <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
/Users/Nick/miniconda3/lib/python3.7/site-packages/numpy/core/fromnumeric.py:2495: FutureWarning: Method .ptp is deprecated and will be removed in a future version. Use numpy.ptp instead.
  return ptp(axis=axis, out=out, **kwargs)
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/exercises_Solutions_statsmodels-Copy1_7_1.png" src="../_images/exercises_Solutions_statsmodels-Copy1_7_1.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;ggplot: (8787045126583)&gt;
</pre></div></div>
</div>
<p>Yup. Those linear models cross out past 315 days or so, but there’s basically no data there, so doesn’t mean much. Through the bulk of the distribution the children of smoking mothers weigh less.</p>
<div class="section" id="Linear-Regression">
<h2>Linear Regression<a class="headerlink" href="#Linear-Regression" title="Permalink to this headline">¶</a></h2>
<p><strong>(3)</strong> Now check this relationship using <code class="docutils literal notranslate"><span class="pre">statsmodels</span></code>. Regress birthweight on gestational period and whether the infant’s mother smoked.</p>
<p>NOTE: you may hit a problem because of the name of one of your columns. You should probably be able to guess the problem given your experience with Python.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">statsmodels.formula.api</span> <span class="k">as</span> <span class="nn">smf</span>
<span class="n">smoking_and_bw</span> <span class="o">=</span> <span class="n">smoking_and_bw</span><span class="o">.</span><span class="n">rename</span><span class="p">({</span><span class="s1">&#39;bwt.oz&#39;</span><span class="p">:</span> <span class="s1">&#39;bwt_oz&#39;</span><span class="p">},</span> <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;columns&#39;</span><span class="p">)</span>
<span class="n">s_and_bw_model</span> <span class="o">=</span> <span class="n">smf</span><span class="o">.</span><span class="n">ols</span><span class="p">(</span><span class="s1">&#39;bwt_oz ~ gestation + smoke&#39;</span><span class="p">,</span> <span class="n">smoking_and_bw</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="n">s_and_bw_model</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<table class="simpletable">
<caption>OLS Regression Results</caption>
<tr>
  <th>Dep. Variable:</th>         <td>bwt_oz</td>      <th>  R-squared:         </th> <td>   0.207</td>
</tr>
<tr>
  <th>Model:</th>                   <td>OLS</td>       <th>  Adj. R-squared:    </th> <td>   0.205</td>
</tr>
<tr>
  <th>Method:</th>             <td>Least Squares</td>  <th>  F-statistic:       </th> <td>   113.2</td>
</tr>
<tr>
  <th>Date:</th>             <td>Wed, 23 Oct 2019</td> <th>  Prob (F-statistic):</th> <td>2.15e-44</td>
</tr>
<tr>
  <th>Time:</th>                 <td>20:08:39</td>     <th>  Log-Likelihood:    </th> <td> -3645.8</td>
</tr>
<tr>
  <th>No. Observations:</th>      <td>   869</td>      <th>  AIC:               </th> <td>   7298.</td>
</tr>
<tr>
  <th>Df Residuals:</th>          <td>   866</td>      <th>  BIC:               </th> <td>   7312.</td>
</tr>
<tr>
  <th>Df Model:</th>              <td>     2</td>      <th>                     </th>     <td> </td>
</tr>
<tr>
  <th>Covariance Type:</th>      <td>nonrobust</td>    <th>                     </th>     <td> </td>
</tr>
</table>
<table class="simpletable">
<tr>
       <td></td>         <th>coef</th>     <th>std err</th>      <th>t</th>      <th>P>|t|</th>  <th>[0.025</th>    <th>0.975]</th>
</tr>
<tr>
  <th>Intercept</th>  <td>   -0.0627</td> <td>    9.764</td> <td>   -0.006</td> <td> 0.995</td> <td>  -19.226</td> <td>   19.100</td>
</tr>
<tr>
  <th>smoke[T.1]</th> <td>   -8.2049</td> <td>    1.096</td> <td>   -7.483</td> <td> 0.000</td> <td>  -10.357</td> <td>   -6.053</td>
</tr>
<tr>
  <th>gestation</th>  <td>    0.4389</td> <td>    0.035</td> <td>   12.594</td> <td> 0.000</td> <td>    0.370</td> <td>    0.507</td>
</tr>
</table>
<table class="simpletable">
<tr>
  <th>Omnibus:</th>       <td> 8.028</td> <th>  Durbin-Watson:     </th> <td>   1.944</td>
</tr>
<tr>
  <th>Prob(Omnibus):</th> <td> 0.018</td> <th>  Jarque-Bera (JB):  </th> <td>   9.319</td>
</tr>
<tr>
  <th>Skew:</th>          <td> 0.141</td> <th>  Prob(JB):          </th> <td> 0.00947</td>
</tr>
<tr>
  <th>Kurtosis:</th>      <td> 3.421</td> <th>  Cond. No.          </th> <td>4.99e+03</td>
</tr>
</table><br/><br/>Warnings:<br/>[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.<br/>[2] The condition number is large, 4.99e+03. This might indicate that there are<br/>strong multicollinearity or other numerical problems.</div>
</div>
<p><strong>(4)</strong> Now let’s expand our model to also take into account mothers’ pregnancy weight and race (make sure to treat race as a categorical variable!).</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">s_and_bw_model2</span> <span class="o">=</span> <span class="n">smf</span><span class="o">.</span><span class="n">ols</span><span class="p">(</span><span class="s1">&#39;bwt_oz ~ gestation + smoke + mpregwt + C(mrace)&#39;</span><span class="p">,</span>
                         <span class="n">smoking_and_bw</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="n">s_and_bw_model2</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<table class="simpletable">
<caption>OLS Regression Results</caption>
<tr>
  <th>Dep. Variable:</th>         <td>bwt_oz</td>      <th>  R-squared:         </th> <td>   0.254</td>
</tr>
<tr>
  <th>Model:</th>                   <td>OLS</td>       <th>  Adj. R-squared:    </th> <td>   0.243</td>
</tr>
<tr>
  <th>Method:</th>             <td>Least Squares</td>  <th>  F-statistic:       </th> <td>   24.27</td>
</tr>
<tr>
  <th>Date:</th>             <td>Wed, 23 Oct 2019</td> <th>  Prob (F-statistic):</th> <td>4.88e-47</td>
</tr>
<tr>
  <th>Time:</th>                 <td>20:08:39</td>     <th>  Log-Likelihood:    </th> <td> -3619.5</td>
</tr>
<tr>
  <th>No. Observations:</th>      <td>   869</td>      <th>  AIC:               </th> <td>   7265.</td>
</tr>
<tr>
  <th>Df Residuals:</th>          <td>   856</td>      <th>  BIC:               </th> <td>   7327.</td>
</tr>
<tr>
  <th>Df Model:</th>              <td>    12</td>      <th>                     </th>     <td> </td>
</tr>
<tr>
  <th>Covariance Type:</th>      <td>nonrobust</td>    <th>                     </th>     <td> </td>
</tr>
</table>
<table class="simpletable">
<tr>
        <td></td>           <th>coef</th>     <th>std err</th>      <th>t</th>      <th>P>|t|</th>  <th>[0.025</th>    <th>0.975]</th>
</tr>
<tr>
  <th>Intercept</th>     <td>   -5.0981</td> <td>   10.174</td> <td>   -0.501</td> <td> 0.616</td> <td>  -25.067</td> <td>   14.871</td>
</tr>
<tr>
  <th>smoke[T.1]</th>    <td>   -8.2449</td> <td>    1.088</td> <td>   -7.577</td> <td> 0.000</td> <td>  -10.381</td> <td>   -6.109</td>
</tr>
<tr>
  <th>C(mrace)[T.1]</th> <td>   -1.8575</td> <td>    2.808</td> <td>   -0.662</td> <td> 0.508</td> <td>   -7.369</td> <td>    3.654</td>
</tr>
<tr>
  <th>C(mrace)[T.2]</th> <td>   -5.8558</td> <td>    3.791</td> <td>   -1.545</td> <td> 0.123</td> <td>  -13.296</td> <td>    1.584</td>
</tr>
<tr>
  <th>C(mrace)[T.3]</th> <td>   -0.4178</td> <td>    2.506</td> <td>   -0.167</td> <td> 0.868</td> <td>   -5.335</td> <td>    4.500</td>
</tr>
<tr>
  <th>C(mrace)[T.4]</th> <td>    0.8841</td> <td>    2.501</td> <td>    0.354</td> <td> 0.724</td> <td>   -4.024</td> <td>    5.792</td>
</tr>
<tr>
  <th>C(mrace)[T.5]</th> <td>   -0.6958</td> <td>    1.787</td> <td>   -0.389</td> <td> 0.697</td> <td>   -4.204</td> <td>    2.812</td>
</tr>
<tr>
  <th>C(mrace)[T.6]</th> <td>    3.9708</td> <td>    3.270</td> <td>    1.214</td> <td> 0.225</td> <td>   -2.448</td> <td>   10.389</td>
</tr>
<tr>
  <th>C(mrace)[T.7]</th> <td>   -6.3358</td> <td>    1.488</td> <td>   -4.258</td> <td> 0.000</td> <td>   -9.256</td> <td>   -3.415</td>
</tr>
<tr>
  <th>C(mrace)[T.8]</th> <td>   -7.5262</td> <td>    2.879</td> <td>   -2.614</td> <td> 0.009</td> <td>  -13.176</td> <td>   -1.876</td>
</tr>
<tr>
  <th>C(mrace)[T.9]</th> <td>   -2.0752</td> <td>    4.145</td> <td>   -0.501</td> <td> 0.617</td> <td>  -10.211</td> <td>    6.061</td>
</tr>
<tr>
  <th>gestation</th>     <td>    0.3979</td> <td>    0.035</td> <td>   11.422</td> <td> 0.000</td> <td>    0.330</td> <td>    0.466</td>
</tr>
<tr>
  <th>mpregwt</th>       <td>    0.1414</td> <td>    0.027</td> <td>    5.260</td> <td> 0.000</td> <td>    0.089</td> <td>    0.194</td>
</tr>
</table>
<table class="simpletable">
<tr>
  <th>Omnibus:</th>       <td> 9.682</td> <th>  Durbin-Watson:     </th> <td>   1.958</td>
</tr>
<tr>
  <th>Prob(Omnibus):</th> <td> 0.008</td> <th>  Jarque-Bera (JB):  </th> <td>  13.156</td>
</tr>
<tr>
  <th>Skew:</th>          <td> 0.104</td> <th>  Prob(JB):          </th> <td> 0.00139</td>
</tr>
<tr>
  <th>Kurtosis:</th>      <td> 3.566</td> <th>  Cond. No.          </th> <td>5.89e+03</td>
</tr>
</table><br/><br/>Warnings:<br/>[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.<br/>[2] The condition number is large, 5.89e+03. This might indicate that there are<br/>strong multicollinearity or other numerical problems.</div>
</div>
<p><strong>(5)</strong> Now let’s test for whether there is an interaction between the mother’s race and the effect of smoking.</p>
<p>Note that race is coded as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>mrace    mother’s race or ethnicity
         0-5= white
         6  = mexican
         7 = black
         8 = asian
         9 = mix
         99 = unknown
</pre></div>
</div>
<p>As most variation in this data is between “white” and other categories, first recode race to be an indicator for white and non-white for easier interpretation.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">smoking_and_bw</span><span class="p">[</span><span class="s1">&#39;white&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">((</span><span class="n">smoking_and_bw</span><span class="p">[</span><span class="s1">&#39;mrace&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;</span>
                           <span class="p">(</span><span class="n">smoking_and_bw</span><span class="p">[</span><span class="s1">&#39;mrace&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">6</span><span class="p">)</span>
                          <span class="p">)</span>

<span class="n">s_and_bw_model3</span> <span class="o">=</span> <span class="n">smf</span><span class="o">.</span><span class="n">ols</span><span class="p">(</span><span class="s1">&#39;bwt_oz ~ gestation + smoke + mpregwt + C(white):smoke&#39;</span><span class="p">,</span>
                         <span class="n">smoking_and_bw</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="n">s_and_bw_model3</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<table class="simpletable">
<caption>OLS Regression Results</caption>
<tr>
  <th>Dep. Variable:</th>         <td>bwt_oz</td>      <th>  R-squared:         </th> <td>   0.242</td>
</tr>
<tr>
  <th>Model:</th>                   <td>OLS</td>       <th>  Adj. R-squared:    </th> <td>   0.238</td>
</tr>
<tr>
  <th>Method:</th>             <td>Least Squares</td>  <th>  F-statistic:       </th> <td>   55.23</td>
</tr>
<tr>
  <th>Date:</th>             <td>Wed, 23 Oct 2019</td> <th>  Prob (F-statistic):</th> <td>7.75e-50</td>
</tr>
<tr>
  <th>Time:</th>                 <td>20:08:39</td>     <th>  Log-Likelihood:    </th> <td> -3626.1</td>
</tr>
<tr>
  <th>No. Observations:</th>      <td>   869</td>      <th>  AIC:               </th> <td>   7264.</td>
</tr>
<tr>
  <th>Df Residuals:</th>          <td>   863</td>      <th>  BIC:               </th> <td>   7293.</td>
</tr>
<tr>
  <th>Df Model:</th>              <td>     5</td>      <th>                     </th>     <td> </td>
</tr>
<tr>
  <th>Covariance Type:</th>      <td>nonrobust</td>    <th>                     </th>     <td> </td>
</tr>
</table>
<table class="simpletable">
<tr>
              <td></td>                 <th>coef</th>     <th>std err</th>      <th>t</th>      <th>P>|t|</th>  <th>[0.025</th>    <th>0.975]</th>
</tr>
<tr>
  <th>Intercept</th>                 <td>  -10.2941</td> <td>    9.969</td> <td>   -1.033</td> <td> 0.302</td> <td>  -29.861</td> <td>    9.273</td>
</tr>
<tr>
  <th>smoke[T.1]</th>                <td>   -9.6867</td> <td>    2.080</td> <td>   -4.657</td> <td> 0.000</td> <td>  -13.769</td> <td>   -5.604</td>
</tr>
<tr>
  <th>C(white)[T.True]:smoke[0]</th> <td>    4.0964</td> <td>    1.587</td> <td>    2.581</td> <td> 0.010</td> <td>    0.981</td> <td>    7.212</td>
</tr>
<tr>
  <th>C(white)[T.True]:smoke[1]</th> <td>    5.8065</td> <td>    1.873</td> <td>    3.101</td> <td> 0.002</td> <td>    2.131</td> <td>    9.482</td>
</tr>
<tr>
  <th>gestation</th>                 <td>    0.4031</td> <td>    0.035</td> <td>   11.569</td> <td> 0.000</td> <td>    0.335</td> <td>    0.472</td>
</tr>
<tr>
  <th>mpregwt</th>                   <td>    0.1348</td> <td>    0.026</td> <td>    5.202</td> <td> 0.000</td> <td>    0.084</td> <td>    0.186</td>
</tr>
</table>
<table class="simpletable">
<tr>
  <th>Omnibus:</th>       <td> 9.527</td> <th>  Durbin-Watson:     </th> <td>   1.949</td>
</tr>
<tr>
  <th>Prob(Omnibus):</th> <td> 0.009</td> <th>  Jarque-Bera (JB):  </th> <td>  13.142</td>
</tr>
<tr>
  <th>Skew:</th>          <td> 0.093</td> <th>  Prob(JB):          </th> <td> 0.00140</td>
</tr>
<tr>
  <th>Kurtosis:</th>      <td> 3.573</td> <th>  Cond. No.          </th> <td>5.73e+03</td>
</tr>
</table><br/><br/>Warnings:<br/>[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.<br/>[2] The condition number is large, 5.73e+03. This might indicate that there are<br/>strong multicollinearity or other numerical problems.</div>
</div>
<p><strong>(6)</strong> Using <a class="reference external" href="https://www.statsmodels.org/stable/generated/statsmodels.regression.linear_model.OLSResults.t_test.html">post-regression test syntax</a> (not by running a new regression on a subpopulation), recover the coefficient and t-statistic for whether smoking reduces birth weight for white mothers. How does this coefficient compare to that for non-white mothers?</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">hypotheses</span> <span class="o">=</span> <span class="s1">&#39;smoke[T.1] + C(white)[T.True]:smoke[1] = 0&#39;</span>
<span class="n">t_test</span> <span class="o">=</span> <span class="n">s_and_bw_model3</span><span class="o">.</span><span class="n">t_test</span><span class="p">(</span><span class="n">hypotheses</span><span class="p">)</span>
<span class="n">t_test</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>&lt;class &#39;statsmodels.stats.contrast.ContrastResults&#39;&gt;
                             Test for Constraints
==============================================================================
                 coef    std err          t      P&gt;|t|      [0.025      0.975]
------------------------------------------------------------------------------
c0            -3.8802      1.580     -2.455      0.014      -6.982      -0.778
==============================================================================
</pre></div>
</div>
</div>
<p>The reduction in birth weight associated with smoking for white mothers appears to be about 40% that of the penalty of black mothers.</p>
<p><strong>(7)</strong> Now let’s use this model to predict some values. Let’s generate some hypothetical newborns:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">newborns</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;smoke&#39;</span><span class="p">:</span> <span class="p">[</span><span class="bp">True</span><span class="p">,</span> <span class="bp">True</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="bp">False</span><span class="p">],</span>
                         <span class="s1">&#39;white&#39;</span><span class="p">:</span> <span class="p">[</span><span class="bp">True</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="bp">True</span><span class="p">,</span> <span class="bp">False</span><span class="p">],</span>
                         <span class="s1">&#39;gestation&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">253</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="mi">248</span><span class="p">,</span> <span class="mi">287</span><span class="p">],</span>
                         <span class="s1">&#39;mpregwt&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">132</span><span class="p">,</span> <span class="mi">129</span><span class="p">,</span> <span class="mi">140</span><span class="p">,</span> <span class="mi">139</span><span class="p">]})</span>
</pre></div>
</div>
<p>Using the model you ran above with gestation, smoke, mpregwt, white, and the interaction of white and smoke, predict birth weights for these newborns.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">newborns</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;smoke&#39;</span><span class="p">:</span> <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">],</span>
                         <span class="s1">&#39;white&#39;</span><span class="p">:</span> <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">],</span>
                         <span class="s1">&#39;gestation&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">253</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="mi">248</span><span class="p">,</span> <span class="mi">287</span><span class="p">],</span>
                         <span class="s1">&#39;mpregwt&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">132</span><span class="p">,</span> <span class="mi">129</span><span class="p">,</span> <span class="mi">140</span><span class="p">,</span> <span class="mi">139</span><span class="p">]})</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">s_and_bw_model3</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">newborns</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>0    105.603327
1    118.338956
2    112.642490
3    124.132854
dtype: float64
</pre></div>
</div>
</div>
</div>
<div class="section" id="Logistic-Regression">
<h2>Logistic Regression<a class="headerlink" href="#Logistic-Regression" title="Permalink to this headline">¶</a></h2>
<p><strong>(8)</strong> Now, using statsmodels, evaluate the impact of smoking on the likelihood a child is born prematurely (where “premature” is defined as gestation of less than 252 days).</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">smoking_and_bw</span><span class="p">[</span><span class="s1">&#39;premature&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">smoking_and_bw</span><span class="p">[</span><span class="s1">&#39;gestation&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">252</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;int&#39;</span><span class="p">)</span>
<span class="n">smoking_and_bw</span><span class="o">.</span><span class="n">columns</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>Index([&#39;id&#39;, &#39;date&#39;, &#39;gestation&#39;, &#39;bwt_oz&#39;, &#39;parity&#39;, &#39;mrace&#39;, &#39;mage&#39;, &#39;med&#39;,
       &#39;mht&#39;, &#39;mpregwt&#39;, &#39;inc&#39;, &#39;smoke&#39;, &#39;white&#39;, &#39;premature&#39;],
      dtype=&#39;object&#39;)
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">premature_fit</span> <span class="o">=</span> <span class="n">smf</span><span class="o">.</span><span class="n">logit</span><span class="p">(</span><span class="s1">&#39;premature ~ smoke + white + mpregwt&#39;</span><span class="p">,</span>
                          <span class="n">smoking_and_bw</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Optimization terminated successfully.
         Current function value: 0.187899
         Iterations 7
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">premature_fit</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<table class="simpletable">
<caption>Logit Regression Results</caption>
<tr>
  <th>Dep. Variable:</th>       <td>premature</td>    <th>  No. Observations:  </th>  <td>   869</td>
</tr>
<tr>
  <th>Model:</th>                 <td>Logit</td>      <th>  Df Residuals:      </th>  <td>   865</td>
</tr>
<tr>
  <th>Method:</th>                 <td>MLE</td>       <th>  Df Model:          </th>  <td>     3</td>
</tr>
<tr>
  <th>Date:</th>            <td>Wed, 23 Oct 2019</td> <th>  Pseudo R-squ.:     </th>  <td>0.04614</td>
</tr>
<tr>
  <th>Time:</th>                <td>20:08:39</td>     <th>  Log-Likelihood:    </th> <td> -163.28</td>
</tr>
<tr>
  <th>converged:</th>             <td>True</td>       <th>  LL-Null:           </th> <td> -171.18</td>
</tr>
<tr>
  <th>Covariance Type:</th>     <td>nonrobust</td>    <th>  LLR p-value:       </th> <td>0.001248</td>
</tr>
</table>
<table class="simpletable">
<tr>
        <td></td>           <th>coef</th>     <th>std err</th>      <th>z</th>      <th>P>|z|</th>  <th>[0.025</th>    <th>0.975]</th>
</tr>
<tr>
  <th>Intercept</th>     <td>   -1.5353</td> <td>    1.024</td> <td>   -1.499</td> <td> 0.134</td> <td>   -3.542</td> <td>    0.472</td>
</tr>
<tr>
  <th>smoke[T.1]</th>    <td>    0.4253</td> <td>    0.320</td> <td>    1.331</td> <td> 0.183</td> <td>   -0.201</td> <td>    1.052</td>
</tr>
<tr>
  <th>white[T.True]</th> <td>   -1.2247</td> <td>    0.320</td> <td>   -3.833</td> <td> 0.000</td> <td>   -1.851</td> <td>   -0.598</td>
</tr>
<tr>
  <th>mpregwt</th>       <td>   -0.0070</td> <td>    0.008</td> <td>   -0.907</td> <td> 0.364</td> <td>   -0.022</td> <td>    0.008</td>
</tr>
</table></div>
</div>
</div>
<div class="section" id="Weighting">
<h2>Weighting<a class="headerlink" href="#Weighting" title="Permalink to this headline">¶</a></h2>
<p>In our merging exercises, we ran a difference-in-difference analysis on crime in California counties to see if, following drug legalization, there was a larger decline in violent crime in counties that had previously also had high drug arrest rates (to test the idea that violence was being generated by the drug trade, and that legalization would decrease this violence).</p>
<p>In those analyses, we treated counties as equally-weighted units of analysis. If we think that each county is a single “community”, and we think community is shaped at the level of communities (particularly when our community division is related to administrative boundaries that impact policing and government services, and is the case with counties), then this is reasonable. But one might think that crime is determined at the individual level, or maybe neighborhood level, and so big counties
should “count more” in our analysis.</p>
<p>Here, let’s use weighted least squares to weight observations based on population. This will allow bigger counties to influence our estimates more.</p>
<p><strong>(1)</strong> To begin, download our data on California arrest rates and population from <a class="reference external" href="https://github.com/nickeubank/MIDS_Data/blob/master/arrest_rates_and_population.parquet">github</a>. You will see I’ve reshaped the data to long format for convenience.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">arrests</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_parquet</span><span class="p">(</span><span class="s1">&#39;/users/nick/github/MIDS_data/arrest_rates_and_population.parquet&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">arrests</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>variable</th>
      <th>COUNTY</th>
      <th>year</th>
      <th>drug_arrest_rate</th>
      <th>total_population</th>
      <th>violent_arrest_rate</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>35</th>
      <td>Lassen County</td>
      <td>2018</td>
      <td>0.001303</td>
      <td>31470.0</td>
      <td>0.003654</td>
    </tr>
    <tr>
      <th>108</th>
      <td>Tuolumne County</td>
      <td>2009</td>
      <td>0.003748</td>
      <td>55761.0</td>
      <td>0.002869</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Amador County</td>
      <td>2018</td>
      <td>0.000831</td>
      <td>37306.0</td>
      <td>0.001930</td>
    </tr>
    <tr>
      <th>36</th>
      <td>Los Angeles County</td>
      <td>2009</td>
      <td>0.003290</td>
      <td>9785295.0</td>
      <td>0.003609</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Amador County</td>
      <td>2009</td>
      <td>0.002655</td>
      <td>38039.0</td>
      <td>0.002629</td>
    </tr>
    <tr>
      <th>40</th>
      <td>Marin County</td>
      <td>2009</td>
      <td>0.001840</td>
      <td>246711.0</td>
      <td>0.002027</td>
    </tr>
    <tr>
      <th>95</th>
      <td>Solano County</td>
      <td>2018</td>
      <td>0.001113</td>
      <td>434981.0</td>
      <td>0.003439</td>
    </tr>
    <tr>
      <th>85</th>
      <td>Santa Clara County</td>
      <td>2018</td>
      <td>0.000460</td>
      <td>1911226.0</td>
      <td>0.002180</td>
    </tr>
    <tr>
      <th>47</th>
      <td>Merced County</td>
      <td>2018</td>
      <td>0.000621</td>
      <td>267390.0</td>
      <td>0.003848</td>
    </tr>
    <tr>
      <th>67</th>
      <td>Sacramento County</td>
      <td>2018</td>
      <td>0.000948</td>
      <td>1495400.0</td>
      <td>0.003400</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p><strong>(2)</strong> To run our difference-in-difference in a regression framework, we need both an indicator variable for observations that occur after legalization (i.e. year == 2018), and an indicator for the population we consider treated (those who had high drug arrest rates in 2008). Re-create those here.</p>
<p><em>Note:</em> if you want, you can also use the 2009 drug arrest rates as a continuous variable. This is a kind of “generalized difference-in-difference”, in which we’re just doing the continuous analogue of the thing we do when we split the sample into “high” and “low” 2009 arrest rates.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Legalization indicator.</span>
<span class="n">arrests</span><span class="p">[</span><span class="s1">&#39;after_legalization&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">arrests</span><span class="o">.</span><span class="n">year</span> <span class="o">==</span> <span class="mi">2018</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Make a &quot;drug arrest rate in 2009&quot; variable</span>
<span class="n">arrests</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">arrests</span><span class="o">.</span><span class="n">year</span> <span class="o">==</span> <span class="mi">2018</span><span class="p">,</span> <span class="s1">&#39;drug_arrest_rate&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<span class="n">arrests</span><span class="p">[</span><span class="s1">&#39;drug_arrest_rate&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">arrests</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;COUNTY&#39;</span><span class="p">)[[</span><span class="s1">&#39;drug_arrest_rate&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="nb">max</span><span class="p">)</span>
<span class="n">arrests</span> <span class="o">=</span> <span class="n">arrests</span><span class="o">.</span><span class="n">rename</span><span class="p">({</span><span class="s1">&#39;drug_arrest_rate&#39;</span><span class="p">:</span> <span class="s1">&#39;drug_arrest_rate_2009&#39;</span><span class="p">},</span> <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;columns&#39;</span><span class="p">)</span>
<span class="n">arrests</span><span class="p">[</span><span class="s1">&#39;high_2009_drug_arrest_rate&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">arrests</span><span class="p">[</span><span class="s1">&#39;drug_arrest_rate_2009&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">arrests</span><span class="p">[</span><span class="s1">&#39;drug_arrest_rate_2009&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">arrests</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>variable</th>
      <th>COUNTY</th>
      <th>year</th>
      <th>drug_arrest_rate_2009</th>
      <th>total_population</th>
      <th>violent_arrest_rate</th>
      <th>after_legalization</th>
      <th>high_2009_drug_arrest_rate</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Alameda County</td>
      <td>2009</td>
      <td>0.003946</td>
      <td>1457095.0</td>
      <td>0.002963</td>
      <td>False</td>
      <td>True</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Alameda County</td>
      <td>2018</td>
      <td>0.003946</td>
      <td>1629615.0</td>
      <td>0.002536</td>
      <td>True</td>
      <td>True</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Alpine County</td>
      <td>2009</td>
      <td>0.001735</td>
      <td>1153.0</td>
      <td>0.006938</td>
      <td>False</td>
      <td>False</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Alpine County</td>
      <td>2018</td>
      <td>0.001735</td>
      <td>1203.0</td>
      <td>0.004156</td>
      <td>True</td>
      <td>False</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Amador County</td>
      <td>2009</td>
      <td>0.002655</td>
      <td>38039.0</td>
      <td>0.002629</td>
      <td>False</td>
      <td>False</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p><strong>(3)</strong> Now regression the violent arrest rate on your two indicators and their interaction. The coefficient on the interaction is your “difference-in-difference” estimate! If you go back to your old homeworks, you should find the coefficient is exactly what you calculated.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Here&#39;s with the discrete split of the sample</span>
<span class="n">arrest_model</span> <span class="o">=</span> <span class="n">smf</span><span class="o">.</span><span class="n">ols</span><span class="p">(</span><span class="s1">&#39;violent_arrest_rate ~ high_2009_drug_arrest_rate + after_legalization + after_legalization:high_2009_drug_arrest_rate&#39;</span><span class="p">,</span>
                       <span class="n">arrests</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="n">arrest_model</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<table class="simpletable">
<caption>OLS Regression Results</caption>
<tr>
  <th>Dep. Variable:</th>    <td>violent_arrest_rate</td> <th>  R-squared:         </th> <td>   0.100</td>
</tr>
<tr>
  <th>Model:</th>                    <td>OLS</td>         <th>  Adj. R-squared:    </th> <td>   0.076</td>
</tr>
<tr>
  <th>Method:</th>              <td>Least Squares</td>    <th>  F-statistic:       </th> <td>   4.166</td>
</tr>
<tr>
  <th>Date:</th>              <td>Wed, 23 Oct 2019</td>   <th>  Prob (F-statistic):</th>  <td>0.00773</td>
</tr>
<tr>
  <th>Time:</th>                  <td>20:08:39</td>       <th>  Log-Likelihood:    </th> <td>  630.00</td>
</tr>
<tr>
  <th>No. Observations:</th>       <td>   116</td>        <th>  AIC:               </th> <td>  -1252.</td>
</tr>
<tr>
  <th>Df Residuals:</th>           <td>   112</td>        <th>  BIC:               </th> <td>  -1241.</td>
</tr>
<tr>
  <th>Df Model:</th>               <td>     3</td>        <th>                     </th>     <td> </td>
</tr>
<tr>
  <th>Covariance Type:</th>       <td>nonrobust</td>      <th>                     </th>     <td> </td>
</tr>
</table>
<table class="simpletable">
<tr>
                                <td></td>                                   <th>coef</th>     <th>std err</th>      <th>t</th>      <th>P>|t|</th>  <th>[0.025</th>    <th>0.975]</th>
</tr>
<tr>
  <th>Intercept</th>                                                     <td>    0.0034</td> <td>    0.000</td> <td>   18.669</td> <td> 0.000</td> <td>    0.003</td> <td>    0.004</td>
</tr>
<tr>
  <th>high_2009_drug_arrest_rate[T.True]</th>                            <td>    0.0008</td> <td>    0.000</td> <td>    2.679</td> <td> 0.008</td> <td>    0.000</td> <td>    0.001</td>
</tr>
<tr>
  <th>after_legalization[T.True]</th>                                    <td>   -0.0002</td> <td>    0.000</td> <td>   -0.716</td> <td> 0.475</td> <td>   -0.001</td> <td>    0.000</td>
</tr>
<tr>
  <th>after_legalization[T.True]:high_2009_drug_arrest_rate[T.True]</th> <td>   -0.0002</td> <td>    0.000</td> <td>   -0.604</td> <td> 0.547</td> <td>   -0.001</td> <td>    0.001</td>
</tr>
</table>
<table class="simpletable">
<tr>
  <th>Omnibus:</th>       <td>24.084</td> <th>  Durbin-Watson:     </th> <td>   1.239</td>
</tr>
<tr>
  <th>Prob(Omnibus):</th> <td> 0.000</td> <th>  Jarque-Bera (JB):  </th> <td>  33.273</td>
</tr>
<tr>
  <th>Skew:</th>          <td> 1.057</td> <th>  Prob(JB):          </th> <td>5.95e-08</td>
</tr>
<tr>
  <th>Kurtosis:</th>      <td> 4.554</td> <th>  Cond. No.          </th> <td>    6.40</td>
</tr>
</table><br/><br/>Warnings:<br/>[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># And here&#39;s with the the continuous variable</span>
<span class="c1"># Note that interpretation of the magnitude of that coefficient is a little harder,</span>
<span class="c1"># as you have to evaluate it at reasonable values of drug_arrest_rate_2009.</span>
<span class="n">arrest_model</span> <span class="o">=</span> <span class="n">smf</span><span class="o">.</span><span class="n">ols</span><span class="p">(</span><span class="s1">&#39;violent_arrest_rate ~ drug_arrest_rate_2009 + after_legalization + after_legalization:drug_arrest_rate_2009&#39;</span><span class="p">,</span>
                       <span class="n">arrests</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="n">arrest_model</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<table class="simpletable">
<caption>OLS Regression Results</caption>
<tr>
  <th>Dep. Variable:</th>    <td>violent_arrest_rate</td> <th>  R-squared:         </th> <td>   0.067</td>
</tr>
<tr>
  <th>Model:</th>                    <td>OLS</td>         <th>  Adj. R-squared:    </th> <td>   0.042</td>
</tr>
<tr>
  <th>Method:</th>              <td>Least Squares</td>    <th>  F-statistic:       </th> <td>   2.674</td>
</tr>
<tr>
  <th>Date:</th>              <td>Wed, 23 Oct 2019</td>   <th>  Prob (F-statistic):</th>  <td>0.0508</td>
</tr>
<tr>
  <th>Time:</th>                  <td>20:08:39</td>       <th>  Log-Likelihood:    </th> <td>  627.87</td>
</tr>
<tr>
  <th>No. Observations:</th>       <td>   116</td>        <th>  AIC:               </th> <td>  -1248.</td>
</tr>
<tr>
  <th>Df Residuals:</th>           <td>   112</td>        <th>  BIC:               </th> <td>  -1237.</td>
</tr>
<tr>
  <th>Df Model:</th>               <td>     3</td>        <th>                     </th>     <td> </td>
</tr>
<tr>
  <th>Covariance Type:</th>       <td>nonrobust</td>      <th>                     </th>     <td> </td>
</tr>
</table>
<table class="simpletable">
<tr>
                          <td></td>                            <th>coef</th>     <th>std err</th>      <th>t</th>      <th>P>|t|</th>  <th>[0.025</th>    <th>0.975]</th>
</tr>
<tr>
  <th>Intercept</th>                                        <td>    0.0029</td> <td>    0.000</td> <td>    8.367</td> <td> 0.000</td> <td>    0.002</td> <td>    0.004</td>
</tr>
<tr>
  <th>after_legalization[T.True]</th>                       <td>    0.0003</td> <td>    0.000</td> <td>    0.599</td> <td> 0.551</td> <td>   -0.001</td> <td>    0.001</td>
</tr>
<tr>
  <th>drug_arrest_rate_2009</th>                            <td>    0.2409</td> <td>    0.100</td> <td>    2.399</td> <td> 0.018</td> <td>    0.042</td> <td>    0.440</td>
</tr>
<tr>
  <th>after_legalization[T.True]:drug_arrest_rate_2009</th> <td>   -0.1818</td> <td>    0.142</td> <td>   -1.280</td> <td> 0.203</td> <td>   -0.463</td> <td>    0.100</td>
</tr>
</table>
<table class="simpletable">
<tr>
  <th>Omnibus:</th>       <td>19.333</td> <th>  Durbin-Watson:     </th> <td>   1.161</td>
</tr>
<tr>
  <th>Prob(Omnibus):</th> <td> 0.000</td> <th>  Jarque-Bera (JB):  </th> <td>  23.764</td>
</tr>
<tr>
  <th>Skew:</th>          <td> 0.941</td> <th>  Prob(JB):          </th> <td>6.92e-06</td>
</tr>
<tr>
  <th>Kurtosis:</th>      <td> 4.174</td> <th>  Cond. No.          </th> <td>1.82e+03</td>
</tr>
</table><br/><br/>Warnings:<br/>[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.<br/>[2] The condition number is large, 1.82e+03. This might indicate that there are<br/>strong multicollinearity or other numerical problems.</div>
</div>
<p><strong>(4)</strong> Now let’s do the same analysis, but this time using county population as a weight in a Weighted Least Squares regression (<code class="docutils literal notranslate"><span class="pre">smf.wls</span></code>). Just pass the keyword argument <code class="docutils literal notranslate"><span class="pre">weights</span></code> a vector fo weights (in this case, <code class="docutils literal notranslate"><span class="pre">arrests['total_population']</span></code>). Note that the weights argument is outside of the formula, so you have to pass an actual vector of values, not just the name of a column.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">weighted_arrest_model</span> <span class="o">=</span> <span class="n">smf</span><span class="o">.</span><span class="n">wls</span><span class="p">(</span><span class="s1">&#39;violent_arrest_rate ~ high_2009_drug_arrest_rate&#39;</span>
                                <span class="s1">&#39;+ after_legalization + after_legalization:high_2009_drug_arrest_rate&#39;</span><span class="p">,</span>
                                <span class="n">data</span><span class="o">=</span><span class="n">arrests</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="n">arrests</span><span class="p">[</span><span class="s1">&#39;total_population&#39;</span><span class="p">])</span>
<span class="n">weighted_arrest_model</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<table class="simpletable">
<caption>WLS Regression Results</caption>
<tr>
  <th>Dep. Variable:</th>    <td>violent_arrest_rate</td> <th>  R-squared:         </th> <td>   0.396</td>
</tr>
<tr>
  <th>Model:</th>                    <td>WLS</td>         <th>  Adj. R-squared:    </th> <td>   0.380</td>
</tr>
<tr>
  <th>Method:</th>              <td>Least Squares</td>    <th>  F-statistic:       </th> <td>   24.52</td>
</tr>
<tr>
  <th>Date:</th>              <td>Wed, 23 Oct 2019</td>   <th>  Prob (F-statistic):</th> <td>2.86e-12</td>
</tr>
<tr>
  <th>Time:</th>                  <td>20:08:39</td>       <th>  Log-Likelihood:    </th> <td>  608.13</td>
</tr>
<tr>
  <th>No. Observations:</th>       <td>   116</td>        <th>  AIC:               </th> <td>  -1208.</td>
</tr>
<tr>
  <th>Df Residuals:</th>           <td>   112</td>        <th>  BIC:               </th> <td>  -1197.</td>
</tr>
<tr>
  <th>Df Model:</th>               <td>     3</td>        <th>                     </th>     <td> </td>
</tr>
<tr>
  <th>Covariance Type:</th>       <td>nonrobust</td>      <th>                     </th>     <td> </td>
</tr>
</table>
<table class="simpletable">
<tr>
                                <td></td>                                   <th>coef</th>     <th>std err</th>      <th>t</th>      <th>P>|t|</th>  <th>[0.025</th>    <th>0.975]</th>
</tr>
<tr>
  <th>Intercept</th>                                                     <td>    0.0028</td> <td>    0.000</td> <td>   21.484</td> <td> 0.000</td> <td>    0.003</td> <td>    0.003</td>
</tr>
<tr>
  <th>high_2009_drug_arrest_rate[T.True]</th>                            <td>    0.0011</td> <td>    0.000</td> <td>    5.938</td> <td> 0.000</td> <td>    0.001</td> <td>    0.001</td>
</tr>
<tr>
  <th>after_legalization[T.True]</th>                                    <td>   -0.0004</td> <td>    0.000</td> <td>   -1.972</td> <td> 0.051</td> <td>   -0.001</td> <td> 1.76e-06</td>
</tr>
<tr>
  <th>after_legalization[T.True]:high_2009_drug_arrest_rate[T.True]</th> <td>   -0.0003</td> <td>    0.000</td> <td>   -1.171</td> <td> 0.244</td> <td>   -0.001</td> <td>    0.000</td>
</tr>
</table>
<table class="simpletable">
<tr>
  <th>Omnibus:</th>       <td> 6.397</td> <th>  Durbin-Watson:     </th> <td>   1.073</td>
</tr>
<tr>
  <th>Prob(Omnibus):</th> <td> 0.041</td> <th>  Jarque-Bera (JB):  </th> <td>  10.179</td>
</tr>
<tr>
  <th>Skew:</th>          <td> 0.125</td> <th>  Prob(JB):          </th> <td> 0.00616</td>
</tr>
<tr>
  <th>Kurtosis:</th>      <td> 4.429</td> <th>  Cond. No.          </th> <td>    7.31</td>
</tr>
</table><br/><br/>Warnings:<br/>[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.</div>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">Practical DS</a></h1>








<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../class_schedule.html">CLASS SCHEDULE</a></li>
</ul>
<p class="caption"><span class="caption-text">PYTHON &amp; PANDAS</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../setup_environment.html">Setting Up Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../managing_python_packages.html">Managing Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python_v_r.html">Python / R Differences</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vars_v_objects.html">Python: Vars v Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ints_and_floats.html">Numbers in Computers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pandas_series.html">Pandas 1: Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pandas_dataframes.html">Pandas 2: DataFrames</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plotting_part1.html">Plotting, Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plotting_part2.html">Plotting, Advanced</a></li>
<li class="toctree-l1"><a class="reference internal" href="../views_and_copies_in_pandas.html">Pandas 3: Views</a></li>
</ul>
<p class="caption"><span class="caption-text">OTHER TOOLS</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../command_line_part1.html">Command Line, Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../command_line_part2.html">Command Line, Advanced</a></li>
<li class="toctree-l1"><a class="reference internal" href="../jupyter.html">Jupyter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../git_and_github.html">Git and Github</a></li>
</ul>
<p class="caption"><span class="caption-text">SKILLS</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_help.html">Getting Help Online</a></li>
<li class="toctree-l1"><a class="reference internal" href="../what_is_big_data.html">What is Big Data?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../big_data_strategies.html">Working with Big Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../performance_understanding.html">Understanding Performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../performance_solutions.html">Solving Performance Probs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parallelism.html">Parallel Computing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../defensive_programming.html">Defensive Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflow.html">Workflow Management</a></li>
</ul>
<p class="caption"><span class="caption-text">OTHER</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../not_a_mids_student.html">Not a MIDS Student?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cheatsheets.html">Cheat Sheets</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Nick Eubank.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.2.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/exercises/Solutions_statsmodels-Copy1.ipynb.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-133829453-1']);
      _gaq.push(['_setDomainName', 'none']);
      _gaq.push(['_setAllowLinker', true]);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
    
  </body>
</html>