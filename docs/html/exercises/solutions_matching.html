
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Matching Exercise &#8212; Unifying Data Science</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container,
div.nbinput.container div.prompt,
div.nbinput.container div.input_area,
div.nbinput.container div[class*=highlight],
div.nbinput.container div[class*=highlight] pre,
div.nboutput.container,
div.nboutput.container div.prompt,
div.nboutput.container div.output_area,
div.nboutput.container div[class*=highlight],
div.nboutput.container div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    background: #f5f5f5;
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
</style>
<div class="section" id="Matching-Exercise">
<h1>Matching Exercise<a class="headerlink" href="#Matching-Exercise" title="Permalink to this headline">¶</a></h1>
<p>In this exercise, we’ll be evaluating how getting a college degree impacts earnings in the US using matching.</p>
<div class="section" id="Matching-Packages:-Python-v.-R">
<h2>Matching Packages: Python v. R<a class="headerlink" href="#Matching-Packages:-Python-v.-R" title="Permalink to this headline">¶</a></h2>
<p>Just as the best tools for machine learning tend to be in Python since they’re developed by CS people (who prefer Python), most of the best tools for causal inference are implemented in R since innovation in causal inference tends to be lead by social scientists using R. As a result, the most well developed matching package is called <a class="reference external" href="https://kosukeimai.github.io/MatchIt/index.html">MatchIt</a>, and is only available in R (though you can always call it from Python using <code class="docutils literal notranslate"><span class="pre">rpy2</span></code>).</p>
<p>In the last year, though, a group of computer scientists and statisticians here at Duke have made some great advancements in matching (especially the computational side of things), and they recently released a set of matching packages in both R and Python that we’ll be using today. They have some great algorithms we’ll use today, but be aware these packages aren’t as mature, and aren’t general purpose packages yet. So if you ever get deep into matching, be aware you will probably still want to
make at least partial use of the R package <a class="reference external" href="https://kosukeimai.github.io/MatchIt/index.html">MatchIt</a>, as well as some other R packages for new innovative techniques (like <a class="reference external" href="https://projects.iq.harvard.edu/frontier/home">Matching Frontier estimation</a>), or <a class="reference external" href="https://almost-matching-exactly.github.io/AHB-R-package/">Adaptive Hyper-Box Matching</a>.</p>
</div>
<div class="section" id="Installing-dame-flame.">
<h2>Installing dame-flame.<a class="headerlink" href="#Installing-dame-flame." title="Permalink to this headline">¶</a></h2>
<p>For this lesson, begin by installing <code class="docutils literal notranslate"><span class="pre">dame-flame</span></code> with <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">dame-flame</span></code> (it’s not on conda yet).</p>
<p><a class="reference external" href="https://almost-matching-exactly.github.io/DAME-FLAME-Python-Package">DAME</a> is an algorithm that we can use for a version of course exact matching. The package only accepts a list of categorical variables, and then attempts to match pairs that match exactly on those variables. That means that if you want to match on, say, age, you have to break it up into categories (say, under 18, 18-29, 30-39, etc. etc.).</p>
<p>Of course, one cannot always find exact matches on all variables, so what DAME does is:</p>
<ol class="arabic simple">
<li><p>Find all observations that match on <em>all</em> matching variables.</p></li>
<li><p>Figure out which matching variable is least useful in predicting the outcome of interest <span class="math notranslate nohighlight">\(Y\)</span> and drops that, then tries to match the remaining observations on the narrowed set of matching variables.</p></li>
<li><p>This repeats until you run out of variables, all observations are matched, or you hit a stopping run (namely: quality of matches falls below a threshold).</p></li>
</ol>
<p>In addition, the lab has also created FLAME, which does the same thing, but employs some tricks to make it <em>massively</em> more computationally efficient, meaning it can be used on datasets with millions of observations (which most matching algorithms cannot). It’s a little less accurate, but an amazing contribution never the less.</p>
</div>
<div class="section" id="Data-Setup">
<h2>Data Setup<a class="headerlink" href="#Data-Setup" title="Permalink to this headline">¶</a></h2>
<p>To save you some time and let you focus on matching, I’ve <em>pre-cleaned</em> about one month worth of of data from the US Current Population Survey data we used for our <a class="reference external" href="exercises/exercises_regression_incomeineq.ipynb">gender discrimination analysis</a>. You can download the data <a class="reference external" href="https://github.com/nickeubank/MIDS_Data/blob/master/Current_Population_Survey/cps_for_matching.dta?raw=true%22">from here</a>, or read it directly with:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cps</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_stata</span><span class="p">(</span>
    <span class="s2">&quot;https://github.com/nickeubank/MIDS_Data/blob/master&quot;</span>
    <span class="s2">&quot;/Current_Population_Survey/cps_for_matching.dta?raw=true&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Load the data and quickly familiarize yourself with its contents.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Load critical packages</span>
<span class="o">%</span><span class="k">load_ext</span> lab_black
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">dame_flame</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Load our Current Population Survey data</span>
<span class="c1"># a regular  survey of US citizens</span>

<span class="n">cps</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_stata</span><span class="p">(</span>
    <span class="s2">&quot;https://github.com/nickeubank/MIDS_Data/blob/master&quot;</span>
    <span class="s2">&quot;/Current_Population_Survey/cps_for_matching.dta?raw=true&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Take a look at the data</span>
<span class="n">cps</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>index</th>
      <th>annual_earnings</th>
      <th>female</th>
      <th>simplified_race</th>
      <th>has_college</th>
      <th>age</th>
      <th>county</th>
      <th>class94</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>151404</td>
      <td>NaN</td>
      <td>1</td>
      <td>3.0</td>
      <td>1</td>
      <td>30</td>
      <td>0-WV</td>
      <td>Private, For Profit</td>
    </tr>
    <tr>
      <th>1</th>
      <td>123453</td>
      <td>NaN</td>
      <td>0</td>
      <td>0.0</td>
      <td>0</td>
      <td>21</td>
      <td>251-TX</td>
      <td>Private, For Profit</td>
    </tr>
    <tr>
      <th>2</th>
      <td>187982</td>
      <td>NaN</td>
      <td>0</td>
      <td>0.0</td>
      <td>0</td>
      <td>40</td>
      <td>5-MA</td>
      <td>Self-Employed, Unincorporated</td>
    </tr>
    <tr>
      <th>3</th>
      <td>122356</td>
      <td>NaN</td>
      <td>1</td>
      <td>0.0</td>
      <td>1</td>
      <td>27</td>
      <td>0-TN</td>
      <td>Private, Nonprofit</td>
    </tr>
    <tr>
      <th>4</th>
      <td>210750</td>
      <td>42900.0</td>
      <td>1</td>
      <td>0.0</td>
      <td>0</td>
      <td>52</td>
      <td>0-IA</td>
      <td>Private, For Profit</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</div>
<div class="section" id="Getting-To-Know-Your-Data">
<h2>Getting To Know Your Data<a class="headerlink" href="#Getting-To-Know-Your-Data" title="Permalink to this headline">¶</a></h2>
<p>Before you start matching, it is important to examine your data to ensure that matching is feasible (you have some overlap the the features of people in the treated and untreated groups), and also that there is a reason <em>to</em> match: either you’re unsure about some of the functional forms at play, or your have some imbalance between the two groups.</p>
<div class="section" id="Exercise-1">
<h3>Exercise 1<a class="headerlink" href="#Exercise-1" title="Permalink to this headline">¶</a></h3>
<p>Show the raw difference of <code class="docutils literal notranslate"><span class="pre">annual_earnings</span></code> between those with and without a college degree (<code class="docutils literal notranslate"><span class="pre">has_college</span></code>). Is the difference statistically significant?</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">statsmodels.formula.api</span> <span class="k">as</span> <span class="nn">smf</span>

<span class="n">smf</span><span class="o">.</span><span class="n">ols</span><span class="p">(</span><span class="s2">&quot;annual_earnings ~ has_college&quot;</span><span class="p">,</span> <span class="n">cps</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<table class="simpletable">
<caption>OLS Regression Results</caption>
<tr>
  <th>Dep. Variable:</th>     <td>annual_earnings</td> <th>  R-squared:         </th> <td>   0.063</td>
</tr>
<tr>
  <th>Model:</th>                   <td>OLS</td>       <th>  Adj. R-squared:    </th> <td>   0.063</td>
</tr>
<tr>
  <th>Method:</th>             <td>Least Squares</td>  <th>  F-statistic:       </th> <td>   370.2</td>
</tr>
<tr>
  <th>Date:</th>             <td>Tue, 23 Feb 2021</td> <th>  Prob (F-statistic):</th> <td>6.56e-80</td>
</tr>
<tr>
  <th>Time:</th>                 <td>09:39:20</td>     <th>  Log-Likelihood:    </th> <td> -63018.</td>
</tr>
<tr>
  <th>No. Observations:</th>      <td>  5515</td>      <th>  AIC:               </th> <td>1.260e+05</td>
</tr>
<tr>
  <th>Df Residuals:</th>          <td>  5513</td>      <th>  BIC:               </th> <td>1.261e+05</td>
</tr>
<tr>
  <th>Df Model:</th>              <td>     1</td>      <th>                     </th>     <td> </td>
</tr>
<tr>
  <th>Covariance Type:</th>      <td>nonrobust</td>    <th>                     </th>     <td> </td>
</tr>
</table>
<table class="simpletable">
<tr>
       <td></td>          <th>coef</th>     <th>std err</th>      <th>t</th>      <th>P>|t|</th>  <th>[0.025</th>    <th>0.975]</th>
</tr>
<tr>
  <th>Intercept</th>   <td> 3.887e+04</td> <td>  336.007</td> <td>  115.669</td> <td> 0.000</td> <td> 3.82e+04</td> <td> 3.95e+04</td>
</tr>
<tr>
  <th>has_college</th> <td> 1.416e+04</td> <td>  735.820</td> <td>   19.242</td> <td> 0.000</td> <td> 1.27e+04</td> <td> 1.56e+04</td>
</tr>
</table>
<table class="simpletable">
<tr>
  <th>Omnibus:</th>       <td>2214.375</td> <th>  Durbin-Watson:     </th> <td>   1.974</td>
</tr>
<tr>
  <th>Prob(Omnibus):</th>  <td> 0.000</td>  <th>  Jarque-Bera (JB):  </th> <td>10578.287</td>
</tr>
<tr>
  <th>Skew:</th>           <td> 1.910</td>  <th>  Prob(JB):          </th> <td>    0.00</td>
</tr>
<tr>
  <th>Kurtosis:</th>       <td> 8.608</td>  <th>  Cond. No.          </th> <td>    2.59</td>
</tr>
</table><br/><br/>Notes:<br/>[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># About 14,000 a year, and it&#39;s very significant.</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Exercise-2">
<h3>Exercise 2<a class="headerlink" href="#Exercise-2" title="Permalink to this headline">¶</a></h3>
<p>Next we can check for balance. Check the share of people in different racial groups who have college degrees. Are those differences statistically significant?</p>
<p>Does the distribution also look different across counties (I don’t need statistical significance for this)?</p>
<p>Does the data seem balanced?</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">smf</span><span class="o">.</span><span class="n">ols</span><span class="p">(</span><span class="s2">&quot;has_college ~ C(simplified_race)&quot;</span><span class="p">,</span> <span class="n">cps</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<table class="simpletable">
<caption>OLS Regression Results</caption>
<tr>
  <th>Dep. Variable:</th>       <td>has_college</td>   <th>  R-squared:         </th> <td>   0.032</td>
</tr>
<tr>
  <th>Model:</th>                   <td>OLS</td>       <th>  Adj. R-squared:    </th> <td>   0.032</td>
</tr>
<tr>
  <th>Method:</th>             <td>Least Squares</td>  <th>  F-statistic:       </th> <td>   122.1</td>
</tr>
<tr>
  <th>Date:</th>             <td>Tue, 23 Feb 2021</td> <th>  Prob (F-statistic):</th> <td>7.74e-78</td>
</tr>
<tr>
  <th>Time:</th>                 <td>09:39:20</td>     <th>  Log-Likelihood:    </th> <td> -7675.0</td>
</tr>
<tr>
  <th>No. Observations:</th>      <td> 11150</td>      <th>  AIC:               </th> <td>1.536e+04</td>
</tr>
<tr>
  <th>Df Residuals:</th>          <td> 11146</td>      <th>  BIC:               </th> <td>1.539e+04</td>
</tr>
<tr>
  <th>Df Model:</th>              <td>     3</td>      <th>                     </th>     <td> </td>
</tr>
<tr>
  <th>Covariance Type:</th>      <td>nonrobust</td>    <th>                     </th>     <td> </td>
</tr>
</table>
<table class="simpletable">
<tr>
              <td></td>                 <th>coef</th>     <th>std err</th>      <th>t</th>      <th>P>|t|</th>  <th>[0.025</th>    <th>0.975]</th>
</tr>
<tr>
  <th>Intercept</th>                 <td>    0.4382</td> <td>    0.006</td> <td>   79.420</td> <td> 0.000</td> <td>    0.427</td> <td>    0.449</td>
</tr>
<tr>
  <th>C(simplified_race)[T.1.0]</th> <td>   -0.1206</td> <td>    0.016</td> <td>   -7.507</td> <td> 0.000</td> <td>   -0.152</td> <td>   -0.089</td>
</tr>
<tr>
  <th>C(simplified_race)[T.2.0]</th> <td>   -0.2398</td> <td>    0.014</td> <td>  -17.682</td> <td> 0.000</td> <td>   -0.266</td> <td>   -0.213</td>
</tr>
<tr>
  <th>C(simplified_race)[T.3.0]</th> <td>    0.0367</td> <td>    0.016</td> <td>    2.261</td> <td> 0.024</td> <td>    0.005</td> <td>    0.069</td>
</tr>
</table>
<table class="simpletable">
<tr>
  <th>Omnibus:</th>       <td>46681.807</td> <th>  Durbin-Watson:     </th> <td>   1.965</td>
</tr>
<tr>
  <th>Prob(Omnibus):</th>  <td> 0.000</td>   <th>  Jarque-Bera (JB):  </th> <td>1670.333</td>
</tr>
<tr>
  <th>Skew:</th>           <td> 0.377</td>   <th>  Prob(JB):          </th> <td>    0.00</td>
</tr>
<tr>
  <th>Kurtosis:</th>       <td> 1.261</td>   <th>  Cond. No.          </th> <td>    3.97</td>
</tr>
</table><br/><br/>Notes:<br/>[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">cps</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;county&quot;</span><span class="p">)[[</span><span class="s2">&quot;has_college&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span><span class="o">.</span><span class="n">sort_values</span><span class="p">((</span><span class="s2">&quot;has_college&quot;</span><span class="p">,</span> <span class="s2">&quot;mean&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead tr th {
        text-align: left;
    }

    .dataframe thead tr:last-of-type th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th colspan="8" halign="left">has_college</th>
    </tr>
    <tr>
      <th></th>
      <th>count</th>
      <th>mean</th>
      <th>std</th>
      <th>min</th>
      <th>25%</th>
      <th>50%</th>
      <th>75%</th>
      <th>max</th>
    </tr>
    <tr>
      <th>county</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>71-MO</th>
      <td>4.0</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>700-VA</th>
      <td>3.0</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>69-NY</th>
      <td>1.0</td>
      <td>0.000000</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>69-FL</th>
      <td>4.0</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>17-MD</th>
      <td>2.0</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>75-CA</th>
      <td>17.0</td>
      <td>0.882353</td>
      <td>0.332106</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>21-NJ</th>
      <td>4.0</td>
      <td>1.000000</td>
      <td>0.000000</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>19-NJ</th>
      <td>2.0</td>
      <td>1.000000</td>
      <td>0.000000</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>81-IN</th>
      <td>1.0</td>
      <td>1.000000</td>
      <td>NaN</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>171-MN</th>
      <td>1.0</td>
      <td>1.000000</td>
      <td>NaN</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
    </tr>
  </tbody>
</table>
<p>326 rows × 8 columns</p>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">cps</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;county&quot;</span><span class="p">)[[</span><span class="s2">&quot;has_college&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>has_college</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>326.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>0.390058</td>
    </tr>
    <tr>
      <th>std</th>
      <td>0.207616</td>
    </tr>
    <tr>
      <th>min</th>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>0.262319</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>0.375000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>0.500000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Good in the middle, but many counties have no college grads, and a few only have college grads.</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Exercise-3">
<h3>Exercise 3<a class="headerlink" href="#Exercise-3" title="Permalink to this headline">¶</a></h3>
<p>One of the other advantages of matching is that even when you have balanced data, you don’t have to go through the process of testing out different functional forms to see what fits the data base.</p>
<p>In our last exercise, we looked at the relationship between gender and earnings “controlling for age”, where we just put in age as a linear control. Plot a non-linear regression of annual_earnings on age (if you’re using <code class="docutils literal notranslate"><span class="pre">plotnine</span></code>, use <code class="docutils literal notranslate"><span class="pre">geom_smooth(method=&quot;lowess&quot;)</span></code>.</p>
<p>Does the relationship look linear?</p>
<p>Does this speak to why it’s nice to not have to think about functional forms with matching as much?</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">plotnine</span> <span class="kn">import</span> <span class="o">*</span>

<span class="p">(</span><span class="n">ggplot</span><span class="p">(</span><span class="n">cps</span><span class="p">,</span> <span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s2">&quot;age&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;annual_earnings&quot;</span><span class="p">))</span> <span class="o">+</span> <span class="n">geom_smooth</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s2">&quot;lowess&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
/Users/Nick/miniconda3/lib/python3.7/site-packages/plotnine/stats/smoothers.py:311: PlotnineWarning: Confidence intervals are not yet implementedfor lowess smoothings.
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/exercises_solutions_matching_15_1.png" src="../_images/exercises_solutions_matching_15_1.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;ggplot: (8775626788821)&gt;
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Not even remotely linear. Thank goodness we don&#39;t have to worry about that with matching!</span>
<span class="c1"># Though it wouldn&#39;t be *that* hard to fit a quadratic.</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="Matching!">
<h2>Matching!<a class="headerlink" href="#Matching!" title="Permalink to this headline">¶</a></h2>
<p>Because DAME is an implementation of exact matching, we have to discretize all of our continuous variables. Thankfully, in this case we only have <code class="docutils literal notranslate"><span class="pre">age</span></code>, so this shouldn’t be too hard!</p>
<div class="section" id="Exercise-4">
<h3>Exercise 4<a class="headerlink" href="#Exercise-4" title="Permalink to this headline">¶</a></h3>
<p>Create a new variable that discretizes age into a single value for each decade of age.</p>
<p>Because CPS only has employment data on people 18 or over, though, include people who are 18 or 19 with the 20 year olds so that group isn’t too small, and if you see any other really small groups, please merge those too.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">cps</span><span class="p">[</span><span class="s2">&quot;discretized_age&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cps</span><span class="o">.</span><span class="n">age</span> <span class="o">//</span> <span class="mi">10</span>
<span class="n">cps</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">cps</span><span class="p">[</span><span class="s2">&quot;discretized_age&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;discretized_age&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">cps</span><span class="p">[</span><span class="s2">&quot;discretized_age&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
3    2760
4    2551
5    2397
2    1990
6    1236
7     173
8      43
Name: discretized_age, dtype: int64
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># 70 and 80 year olds are tiny groups.</span>
<span class="n">cps</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">cps</span><span class="p">[</span><span class="s2">&quot;discretized_age&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">8</span><span class="p">,</span> <span class="s2">&quot;discretized_age&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">7</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Exercise-5">
<h3>Exercise 5<a class="headerlink" href="#Exercise-5" title="Permalink to this headline">¶</a></h3>
<p>We also have to covert our string variables into numeric variables for DAME, so convert <code class="docutils literal notranslate"><span class="pre">county</span></code> and <code class="docutils literal notranslate"><span class="pre">class94</span></code> to a numeric vector of intergers.</p>
<p>(Note: it’s not clear whether <code class="docutils literal notranslate"><span class="pre">class94</span></code> belongs: if it reflects people choosing fields based on passion, it belongs; if people choose certain jobs because of their degrees, its not something we’d actually want in our regression.</p>
<p>Hint: if you use <code class="docutils literal notranslate"><span class="pre">pd.Categorical</span></code> to convert you var to a categorical, you can pull the underlying integer codes with <code class="docutils literal notranslate"><span class="pre">.codes</span></code>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">cps</span><span class="p">[</span><span class="s2">&quot;county&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Categorical</span><span class="p">(</span><span class="n">cps</span><span class="p">[</span><span class="s2">&quot;county&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">codes</span>
<span class="n">cps</span><span class="p">[</span><span class="s2">&quot;county&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
41     576
200    275
12     230
33     225
51     223
      ...
263      1
213      1
285      1
154      1
142      1
Name: county, Length: 326, dtype: int64
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">cps</span><span class="p">[</span><span class="s2">&quot;class94&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Categorical</span><span class="p">(</span><span class="n">cps</span><span class="p">[</span><span class="s2">&quot;class94&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">codes</span>
<span class="n">cps</span><span class="p">[</span><span class="s2">&quot;class94&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
3    7809
1     740
4     706
2     615
6     552
5     387
0     337
7       4
Name: class94, dtype: int64
</pre></div></div>
</div>
</div>
</div>
<div class="section" id="Let’s-Do-Matching-with-DAME">
<h2>Let’s Do Matching with DAME<a class="headerlink" href="#Let’s-Do-Matching-with-DAME" title="Permalink to this headline">¶</a></h2>
<div class="section" id="Exercise-6">
<h3>Exercise 6<a class="headerlink" href="#Exercise-6" title="Permalink to this headline">¶</a></h3>
<p>First, drop all the variables you <em>don’t</em> want in matching (e.g. your original <code class="docutils literal notranslate"><span class="pre">age</span></code> variable), and any observations for which <code class="docutils literal notranslate"><span class="pre">annual_earnings</span></code> is missing.</p>
<p>You will probably also have to drop a column named <code class="docutils literal notranslate"><span class="pre">index</span></code>: DAME will try and match on ANY included variables, and so because there was a column called <code class="docutils literal notranslate"><span class="pre">index</span></code> in the data we imported, if we leave it in DAME will try (and obviously fail) to match on index.</p>
<p>Also, it’s best to reset your index, as <code class="docutils literal notranslate"><span class="pre">dame_flame</span></code> using index labels to identify matches.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">for_matching</span> <span class="o">=</span> <span class="n">cps</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s2">&quot;age&quot;</span><span class="p">,</span> <span class="s2">&quot;index&quot;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="s2">&quot;columns&quot;</span><span class="p">)</span>
<span class="n">for_matching</span> <span class="o">=</span> <span class="n">for_matching</span><span class="p">[</span><span class="n">for_matching</span><span class="o">.</span><span class="n">annual_earnings</span><span class="o">.</span><span class="n">notnull</span><span class="p">()]</span>
<span class="n">for_matching</span> <span class="o">=</span> <span class="n">for_matching</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">for_matching</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>annual_earnings</th>
      <th>female</th>
      <th>simplified_race</th>
      <th>has_college</th>
      <th>county</th>
      <th>class94</th>
      <th>discretized_age</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>42900.0</td>
      <td>1</td>
      <td>0.0</td>
      <td>0</td>
      <td>10</td>
      <td>3</td>
      <td>5</td>
    </tr>
    <tr>
      <th>1</th>
      <td>31200.0</td>
      <td>0</td>
      <td>2.0</td>
      <td>0</td>
      <td>31</td>
      <td>3</td>
      <td>3</td>
    </tr>
    <tr>
      <th>2</th>
      <td>20020.0</td>
      <td>0</td>
      <td>0.0</td>
      <td>1</td>
      <td>8</td>
      <td>3</td>
      <td>6</td>
    </tr>
    <tr>
      <th>3</th>
      <td>22859.2</td>
      <td>0</td>
      <td>0.0</td>
      <td>0</td>
      <td>44</td>
      <td>1</td>
      <td>4</td>
    </tr>
    <tr>
      <th>4</th>
      <td>73860.8</td>
      <td>0</td>
      <td>0.0</td>
      <td>1</td>
      <td>24</td>
      <td>3</td>
      <td>3</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>5510</th>
      <td>33800.0</td>
      <td>1</td>
      <td>3.0</td>
      <td>0</td>
      <td>247</td>
      <td>3</td>
      <td>3</td>
    </tr>
    <tr>
      <th>5511</th>
      <td>23920.0</td>
      <td>0</td>
      <td>3.0</td>
      <td>0</td>
      <td>272</td>
      <td>3</td>
      <td>5</td>
    </tr>
    <tr>
      <th>5512</th>
      <td>31200.0</td>
      <td>0</td>
      <td>2.0</td>
      <td>0</td>
      <td>246</td>
      <td>3</td>
      <td>2</td>
    </tr>
    <tr>
      <th>5513</th>
      <td>37440.0</td>
      <td>0</td>
      <td>0.0</td>
      <td>0</td>
      <td>99</td>
      <td>3</td>
      <td>2</td>
    </tr>
    <tr>
      <th>5514</th>
      <td>26000.0</td>
      <td>0</td>
      <td>1.0</td>
      <td>0</td>
      <td>23</td>
      <td>2</td>
      <td>5</td>
    </tr>
  </tbody>
</table>
<p>5515 rows × 7 columns</p>
</div></div>
</div>
</div>
<div class="section" id="Exercise-7">
<h3>Exercise 7<a class="headerlink" href="#Exercise-7" title="Permalink to this headline">¶</a></h3>
<p>The syntax of <code class="docutils literal notranslate"><span class="pre">dame_flame</span></code> is similar to the syntax of <code class="docutils literal notranslate"><span class="pre">sklearn</span></code>. If you start with a dataset called <code class="docutils literal notranslate"><span class="pre">my_data</span></code> with a <code class="docutils literal notranslate"><span class="pre">treat</span></code> variable with treatment assignment and an <code class="docutils literal notranslate"><span class="pre">outcome</span></code> variable for my outcome of interest (<span class="math notranslate nohighlight">\(Y\)</span>), the syntax to do basic matching would be:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">dame_flame</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">dame_flame</span><span class="o">.</span><span class="n">matching</span><span class="o">.</span><span class="n">DAME</span><span class="p">(</span><span class="n">repeats</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">want_pe</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span>
    <span class="n">my_data</span><span class="p">,</span>
    <span class="n">treatment_column_name</span><span class="o">=</span><span class="s2">&quot;treat&quot;</span><span class="p">,</span>
    <span class="n">outcome_column_name</span><span class="o">=</span><span class="s2">&quot;outcome&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">my_data</span><span class="p">)</span>
</pre></div>
</div>
<p>Where the arguments:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">repeats=False</span></code> says that I only want each observation to get matched once. We’ll talk about what happens if we use <code class="docutils literal notranslate"><span class="pre">repeats=True</span></code> below.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">verbose=3</span></code> tells dame to report everything it’s doing as it goes.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">want_pe</span></code> says “please include the predictive error in your printout at each step”. This is a measure of match quality.</p></li>
</ul>
<p>So run DAME on your data!</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">model</span> <span class="o">=</span> <span class="n">dame_flame</span><span class="o">.</span><span class="n">matching</span><span class="o">.</span><span class="n">DAME</span><span class="p">(</span><span class="n">repeats</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">want_pe</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span>
    <span class="n">for_matching</span><span class="p">,</span>
    <span class="n">treatment_column_name</span><span class="o">=</span><span class="s2">&quot;has_college&quot;</span><span class="p">,</span>
    <span class="n">outcome_column_name</span><span class="o">=</span><span class="s2">&quot;annual_earnings&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">for_matching</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Iteration number:  1
        Number of matched groups formed in total:  370
        Unmatched treated units:  644 out of a total of  1150 treated units
        Unmatched control units:  3187 out of a total of  4365 control units
        Predictive error of covariates chosen this iteration:  0
        Number of matches made in this iteration:  1684
        Number of matches made so far:  1684
        In this iteration, the covariates dropped are:  set()
Iteration number:  2
        Number of matched groups formed in total:  494
        Unmatched treated units:  25 out of a total of  1150 treated units
        Unmatched control units:  180 out of a total of  4365 control units
        Predictive error of covariates chosen this iteration:  1199421883.1095908
        Number of matches made in this iteration:  3626
        Number of matches made so far:  5310
        In this iteration, the covariates dropped are:  frozenset({&#39;county&#39;})
Iteration number:  3
        Number of matched groups formed in total:  494
        Unmatched treated units:  25 out of a total of  1150 treated units
        Unmatched control units:  180 out of a total of  4365 control units
        Predictive error of covariates chosen this iteration:  1204727749.8949614
        Number of matches made in this iteration:  0
        Number of matches made so far:  5310
        In this iteration, the covariates dropped are:  frozenset({&#39;simplified_race&#39;})
Iteration number:  4
        Number of matched groups formed in total:  505
        Unmatched treated units:  8 out of a total of  1150 treated units
        Unmatched control units:  129 out of a total of  4365 control units
        Predictive error of covariates chosen this iteration:  1204742613.4791539
        Number of matches made in this iteration:  68
        Number of matches made so far:  5378
        In this iteration, the covariates dropped are:  frozenset({&#39;county&#39;, &#39;simplified_race&#39;})
Iteration number:  5
        Number of matched groups formed in total:  505
        Unmatched treated units:  8 out of a total of  1150 treated units
        Unmatched control units:  129 out of a total of  4365 control units
        Predictive error of covariates chosen this iteration:  1205072671.32629
        Number of matches made in this iteration:  0
        Number of matches made so far:  5378
        In this iteration, the covariates dropped are:  frozenset({&#39;class94&#39;})
Iteration number:  6
        Number of matched groups formed in total:  508
        Unmatched treated units:  5 out of a total of  1150 treated units
        Unmatched control units:  120 out of a total of  4365 control units
        Predictive error of covariates chosen this iteration:  1205171280.4727237
        Number of matches made in this iteration:  12
        Number of matches made so far:  5390
        In this iteration, the covariates dropped are:  frozenset({&#39;county&#39;, &#39;class94&#39;})
Iteration number:  7
        Number of matched groups formed in total:  509
        Unmatched treated units:  4 out of a total of  1150 treated units
        Unmatched control units:  119 out of a total of  4365 control units
        Predictive error of covariates chosen this iteration:  1210524158.7436352
        Number of matches made in this iteration:  2
        Number of matches made so far:  5392
        In this iteration, the covariates dropped are:  frozenset({&#39;simplified_race&#39;, &#39;class94&#39;})
Iteration number:  8
        Number of matched groups formed in total:  511
        Unmatched treated units:  0 out of a total of  1150 treated units
        Unmatched control units:  110 out of a total of  4365 control units
        Predictive error of covariates chosen this iteration:  1210539313.933855
        Number of matches made in this iteration:  13
        Number of matches made so far:  5405
        In this iteration, the covariates dropped are:  frozenset({&#39;county&#39;, &#39;simplified_race&#39;, &#39;class94&#39;})
5405 units matched. We finished with no more treated units to match
</pre></div></div>
</div>
</div>
</div>
<div class="section" id="Interpreting-DAME-output">
<h2>Interpreting DAME output<a class="headerlink" href="#Interpreting-DAME-output" title="Permalink to this headline">¶</a></h2>
<p>The output you get from doing this <em>should</em> be reports from about 8 iterations of matching. In each iteration, you’ll see a description of the number of matches made in the interation, the number of treatment units still unmatched, and the number of control units unmatched.</p>
<p>In the first iteration, the algorithm tries to match observations that match on <em>all</em> the variables in your data. That’s why in the first iteration, you see the set of variables being drop is an empty set – it <em>hasn’t</em> dropped any variables:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Iteration</span> <span class="n">number</span><span class="p">:</span>  <span class="mi">1</span>
    <span class="n">Number</span> <span class="n">of</span> <span class="n">matched</span> <span class="n">groups</span> <span class="n">formed</span> <span class="ow">in</span> <span class="n">total</span><span class="p">:</span>  <span class="mi">370</span>
    <span class="n">Unmatched</span> <span class="n">treated</span> <span class="n">units</span><span class="p">:</span>  <span class="mi">644</span> <span class="n">out</span> <span class="n">of</span> <span class="n">a</span> <span class="n">total</span> <span class="n">of</span>  <span class="mi">1150</span> <span class="n">treated</span> <span class="n">units</span>
    <span class="n">Unmatched</span> <span class="n">control</span> <span class="n">units</span><span class="p">:</span>  <span class="mi">3187</span> <span class="n">out</span> <span class="n">of</span> <span class="n">a</span> <span class="n">total</span> <span class="n">of</span>  <span class="mi">4365</span> <span class="n">control</span> <span class="n">units</span>
    <span class="n">Predictive</span> <span class="n">error</span> <span class="n">of</span> <span class="n">covariates</span> <span class="n">chosen</span> <span class="n">this</span> <span class="n">iteration</span><span class="p">:</span>  <span class="mi">0</span>
    <span class="n">Number</span> <span class="n">of</span> <span class="n">matches</span> <span class="n">made</span> <span class="ow">in</span> <span class="n">this</span> <span class="n">iteration</span><span class="p">:</span>  <span class="mi">1684</span>
    <span class="n">Number</span> <span class="n">of</span> <span class="n">matches</span> <span class="n">made</span> <span class="n">so</span> <span class="n">far</span><span class="p">:</span>  <span class="mi">1684</span>
    <span class="n">In</span> <span class="n">this</span> <span class="n">iteration</span><span class="p">,</span> <span class="n">the</span> <span class="n">covariates</span> <span class="n">dropped</span> <span class="n">are</span><span class="p">:</span>  <span class="nb">set</span><span class="p">()</span>
</pre></div>
</div>
<p>But as we can see from this output, the algorithm found 1,684 perfect matches – pairs of observations (one treated, one untreated) that had <em>exactly</em> the same value of all the variables we included. But we also see we still have 644 unmatched treated units, so what do we do? The answer is that we have to drop some of our matching variables and try again. But what variable should we drop?</p>
<p>This is the secret sauce of DAME. DAME picks the variables to drop by trying to predict our outcome <span class="math notranslate nohighlight">\(Y\)</span> using all our variables (by default using a ridge regression), then it drops the matching variable that is contributing the least to that prediction. Since our goal in matching is to eliminate baseline differences (<span class="math notranslate nohighlight">\(E(Y_0|D=1) - E(Y_1|D=0)\)</span>), dropping the covariates least related to <span class="math notranslate nohighlight">\(Y\)</span> makes sense.</p>
<p>As a result, in the second iteration, we see that the variable it drops first is <code class="docutils literal notranslate"><span class="pre">county</span></code>, and it’s subsequently able to make another 3,626 new matches on the remaining variables!</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Iteration</span> <span class="n">number</span><span class="p">:</span>  <span class="mi">2</span>
    <span class="n">Number</span> <span class="n">of</span> <span class="n">matched</span> <span class="n">groups</span> <span class="n">formed</span> <span class="ow">in</span> <span class="n">total</span><span class="p">:</span>  <span class="mi">494</span>
    <span class="n">Unmatched</span> <span class="n">treated</span> <span class="n">units</span><span class="p">:</span>  <span class="mi">25</span> <span class="n">out</span> <span class="n">of</span> <span class="n">a</span> <span class="n">total</span> <span class="n">of</span>  <span class="mi">1150</span> <span class="n">treated</span> <span class="n">units</span>
    <span class="n">Unmatched</span> <span class="n">control</span> <span class="n">units</span><span class="p">:</span>  <span class="mi">180</span> <span class="n">out</span> <span class="n">of</span> <span class="n">a</span> <span class="n">total</span> <span class="n">of</span>  <span class="mi">4365</span> <span class="n">control</span> <span class="n">units</span>
    <span class="n">Predictive</span> <span class="n">error</span> <span class="n">of</span> <span class="n">covariates</span> <span class="n">chosen</span> <span class="n">this</span> <span class="n">iteration</span><span class="p">:</span>  <span class="mf">1199421883.1095908</span>
    <span class="n">Number</span> <span class="n">of</span> <span class="n">matches</span> <span class="n">made</span> <span class="ow">in</span> <span class="n">this</span> <span class="n">iteration</span><span class="p">:</span>  <span class="mi">3626</span>
    <span class="n">Number</span> <span class="n">of</span> <span class="n">matches</span> <span class="n">made</span> <span class="n">so</span> <span class="n">far</span><span class="p">:</span>  <span class="mi">5310</span>
    <span class="n">In</span> <span class="n">this</span> <span class="n">iteration</span><span class="p">,</span> <span class="n">the</span> <span class="n">covariates</span> <span class="n">dropped</span> <span class="n">are</span><span class="p">:</span>  <span class="nb">frozenset</span><span class="p">({</span><span class="s1">&#39;county&#39;</span><span class="p">})</span>
</pre></div>
</div>
<p>And so DAME continues until after 8 iterations, it’s matched all treated observations.</p>
</div>
<div class="section" id="Exercise-8">
<h2>Exercise 8<a class="headerlink" href="#Exercise-8" title="Permalink to this headline">¶</a></h2>
<p>Congratulations! You just on your first one-to-one matching!</p>
<p>The next step is to think about which of the matches that DAME generated are good enough for inclusion in our analysis. As you may recall, one of the choices you have to make as a researcher when doing matching is how “good” a match has to be in order to be included in your final data set. By default, DAME will keep dropping matching variables until it has been able to match all of the treated observations or runs out of variables. It will do this no matter how bad the matches start to become –
if it ends up with the treated observation and a control observation that can only be matched on gender, it will match them just on gender, even though we probably don’t think that that’s a “good” match.</p>
<p>The way to control this behavior is to tell DAME when to stop manually using the <code class="docutils literal notranslate"><span class="pre">early_stop_iterations</span></code> argument to tell the matching algorithm when to stop.</p>
<p>So when is a good time to stop? There’s no objective or “right” answer to that question. It fundamentally comes down to a trade-off between bias (which gets higher is you allow more low quality matches into your data) and variance (which will go down as you increase the number of matches you keep).</p>
<p>But one way to start the process of picking a cutpoint is to examine how the quality of matches evolves over iterations. DAME keep this information in <code class="docutils literal notranslate"><span class="pre">model.pe_each_iter</span></code>. This shows, for each iteration, the “prediction error” resulting from dropping the variables excluded in each step. This “prediction error” is the difference in the mean-squared error of regressing <span class="math notranslate nohighlight">\(Y\)</span> on our matching variables (by default in a ridge regression) with all variables versus with the subset being used for
matching in a given iteration. By design, of course, this is always increasing.</p>
<p>To see how this evolves, plot your <code class="docutils literal notranslate"><span class="pre">pe</span></code> against iteration numbers. Note that our first iteration doesn’t count, since by definition the first iteration has an error of 0, and also note that the iterations count from 1, not 0 (weird for Python… but whatever). You can also see the <code class="docutils literal notranslate"><span class="pre">pe</span></code> values for each iteration reported in the output from when DAME ran above if you want to make your you’re lining up the errors with iterations right.</p>
<p>Are there any points where the match quality seems to fall off dramatically?</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">for_pe</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
    <span class="p">{</span><span class="s2">&quot;pe&quot;</span><span class="p">:</span> <span class="n">model</span><span class="o">.</span><span class="n">pe_each_iter</span><span class="p">,</span> <span class="s2">&quot;i&quot;</span><span class="p">:</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">pe_each_iter</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)}</span>
<span class="p">)</span>
<span class="n">for_pe</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>pe</th>
      <th>i</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1.199422e+09</td>
      <td>2</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1.204728e+09</td>
      <td>3</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1.204743e+09</td>
      <td>4</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1.205073e+09</td>
      <td>5</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1.205171e+09</td>
      <td>6</td>
    </tr>
    <tr>
      <th>5</th>
      <td>1.210524e+09</td>
      <td>7</td>
    </tr>
    <tr>
      <th>6</th>
      <td>1.210539e+09</td>
      <td>8</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">ggplot</span><span class="p">(</span><span class="n">for_pe</span><span class="p">,</span> <span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s2">&quot;i&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;pe&quot;</span><span class="p">))</span> <span class="o">+</span> <span class="n">geom_line</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/exercises_solutions_matching_30_0.png" src="../_images/exercises_solutions_matching_30_0.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;ggplot: (8775389962857)&gt;
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Yup! Iteration 3 and iteration 7.</span>
</pre></div>
</div>
</div>
<div class="section" id="Exercise-9">
<h3>Exercise 9<a class="headerlink" href="#Exercise-9" title="Permalink to this headline">¶</a></h3>
<p>Suppose we want to ensure we have at least 5,000 observations in our data – where might you cut off the data to get a sample size of at least that but before a big quality falloff?</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># I&#39;d stop after iteration 2 -- things fall off fast then, but with very few added matches.</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Exercise-10">
<h3>Exercise 10<a class="headerlink" href="#Exercise-10" title="Permalink to this headline">¶</a></h3>
<p>Re-run your matching, stopping at the point you picked above using <code class="docutils literal notranslate"><span class="pre">early_stop_iterations</span></code>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">model</span> <span class="o">=</span> <span class="n">dame_flame</span><span class="o">.</span><span class="n">matching</span><span class="o">.</span><span class="n">DAME</span><span class="p">(</span>
    <span class="n">repeats</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">want_pe</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">early_stop_iterations</span><span class="o">=</span><span class="mi">2</span>
<span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span>
    <span class="n">for_matching</span><span class="p">,</span>
    <span class="n">treatment_column_name</span><span class="o">=</span><span class="s2">&quot;has_college&quot;</span><span class="p">,</span>
    <span class="n">outcome_column_name</span><span class="o">=</span><span class="s2">&quot;annual_earnings&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">for_matching</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Iteration number:  1
        Number of matched groups formed in total:  370
        Unmatched treated units:  644 out of a total of  1150 treated units
        Unmatched control units:  3187 out of a total of  4365 control units
        Predictive error of covariates chosen this iteration:  0
        Number of matches made in this iteration:  1684
        Number of matches made so far:  1684
        In this iteration, the covariates dropped are:  set()
Iteration number:  2
        Number of matched groups formed in total:  494
        Unmatched treated units:  25 out of a total of  1150 treated units
        Unmatched control units:  180 out of a total of  4365 control units
        Predictive error of covariates chosen this iteration:  1199421883.1095908
        Number of matches made in this iteration:  3626
        Number of matches made so far:  5310
        In this iteration, the covariates dropped are:  frozenset({&#39;county&#39;})
5310 units matched. We stopped before doing iteration number:  2
</pre></div></div>
</div>
</div>
</div>
<div class="section" id="Getting-Back-a-Dataset">
<h2>Getting Back a Dataset<a class="headerlink" href="#Getting-Back-a-Dataset" title="Permalink to this headline">¶</a></h2>
<p>OK, my one current complaint with DAME is that it doesn’t just give you back a nice dataset of your matches for analysis. If we look at our results – <code class="docutils literal notranslate"><span class="pre">matches</span></code> – it’s <em>almost</em> what we want, except it’s dropped our treatment and outcome columns, and it’s put a string <code class="docutils literal notranslate"><span class="pre">*</span></code> in any entry where a value <em>wasn’t</em> used for matching:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">female</span> <span class="n">simplified_race</span>   <span class="n">county</span>   <span class="n">class94</span>   <span class="n">discretized_age</span>
<span class="mi">0</span>  <span class="mf">1.0</span>     <span class="mf">0.0</span>              <span class="mf">10.0</span>      <span class="mf">3.0</span>          <span class="mf">5.0</span>
<span class="mi">1</span>  <span class="mf">0.0</span>     <span class="mf">2.0</span>              <span class="o">*</span>         <span class="mf">3.0</span>          <span class="mf">3.0</span>
<span class="mi">2</span>  <span class="mf">0.0</span>     <span class="mf">0.0</span>              <span class="mf">8.0</span>        <span class="mf">3.0</span>         <span class="mf">6.0</span>
<span class="mi">3</span>  <span class="mf">0.0</span>     <span class="mf">0.0</span>              <span class="o">*</span>         <span class="mf">1.0</span>          <span class="mf">4.0</span>
<span class="mi">4</span>  <span class="mf">0.0</span>     <span class="mf">0.0</span>              <span class="mf">24.0</span>      <span class="mf">3.0</span>          <span class="mf">3.0</span>
</pre></div>
</div>
<p>So for now (though I think this will get updated in the package), we’ll have to do it ourselves! Just copy-paste this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_dataframe</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">result_of_fit</span><span class="p">):</span>

    <span class="c1"># Get original data</span>
    <span class="n">better</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">input_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">result_of_fit</span><span class="o">.</span><span class="n">index</span><span class="p">]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">better</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">is_unique</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Need index values in input data to be unique&quot;</span><span class="p">)</span>

    <span class="c1"># Get match groups for clustering</span>
    <span class="n">better</span><span class="p">[</span><span class="s2">&quot;match_group&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
    <span class="n">better</span><span class="p">[</span><span class="s2">&quot;match_group_size&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
    <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">group</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">units_per_group</span><span class="p">):</span>
        <span class="n">better</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">group</span><span class="p">,</span> <span class="s2">&quot;match_group&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">idx</span>
        <span class="n">better</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">group</span><span class="p">,</span> <span class="s2">&quot;match_group_size&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>

    <span class="c1"># Get weights. I THINK this is right?! At least for with repeat=False?</span>
    <span class="n">t</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">treatment_column_name</span>
    <span class="n">better</span><span class="p">[</span><span class="s2">&quot;t_in_group&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">better</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;match_group&quot;</span><span class="p">)[</span><span class="n">t</span><span class="p">]</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">)</span>

    <span class="c1"># Make weights</span>
    <span class="n">better</span><span class="p">[</span><span class="s2">&quot;weights&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
    <span class="n">better</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">better</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;weights&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>  <span class="c1"># treaments are 1</span>

    <span class="c1"># Controls start as proportional to num of treatments</span>
    <span class="c1"># each observation is matched to.</span>
    <span class="n">better</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">better</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;weights&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">better</span><span class="p">[</span><span class="s2">&quot;t_in_group&quot;</span><span class="p">]</span> <span class="o">/</span> <span class="p">(</span>
        <span class="n">better</span><span class="p">[</span><span class="s2">&quot;match_group_size&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="n">better</span><span class="p">[</span><span class="s2">&quot;t_in_group&quot;</span><span class="p">]</span>
    <span class="p">)</span>

    <span class="c1"># Then re-normalize for num unique control observations.</span>
    <span class="n">control_weights</span> <span class="o">=</span> <span class="n">better</span><span class="p">[</span><span class="n">better</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">][</span><span class="s2">&quot;weights&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>

    <span class="n">num_control_obs</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">better</span><span class="p">[</span><span class="n">better</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">())</span>
    <span class="n">renormalization</span> <span class="o">=</span> <span class="n">num_control_obs</span> <span class="o">/</span> <span class="n">control_weights</span>
    <span class="n">better</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">better</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;weights&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">better</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">better</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;weights&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">renormalization</span>
    <span class="p">)</span>
    <span class="k">assert</span> <span class="n">better</span><span class="o">.</span><span class="n">weights</span><span class="o">.</span><span class="n">notnull</span><span class="p">()</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>

    <span class="n">better</span> <span class="o">=</span> <span class="n">better</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s2">&quot;t_in_group&quot;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="s2">&quot;columns&quot;</span><span class="p">)</span>

    <span class="c1"># Make sure right length and values!</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">result_of_fit</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">better</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">better</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">better</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;weights&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">==</span> <span class="n">num_control_obs</span>

    <span class="k">return</span> <span class="n">better</span>
</pre></div>
</div>
<div class="section" id="Exercise-11">
<h3>Exercise 11<a class="headerlink" href="#Exercise-11" title="Permalink to this headline">¶</a></h3>
<p>Copy-paste that code and run it with your original data, your (fit) model, and what you got back when you ran <code class="docutils literal notranslate"><span class="pre">result_of_fit</span></code>. Then we’ll work with the output of that. You should get back a single dataframe of the same length as your original model.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[34]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">def</span> <span class="nf">get_dataframe</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">result_of_fit</span><span class="p">):</span>

    <span class="c1"># Get original data</span>
    <span class="n">better</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">input_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">result_of_fit</span><span class="o">.</span><span class="n">index</span><span class="p">]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">better</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">is_unique</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Need index values in input data to be unique&quot;</span><span class="p">)</span>

    <span class="c1"># Get match groups for clustering</span>
    <span class="n">better</span><span class="p">[</span><span class="s2">&quot;match_group&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
    <span class="n">better</span><span class="p">[</span><span class="s2">&quot;match_group_size&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
    <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">group</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">units_per_group</span><span class="p">):</span>
        <span class="n">better</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">group</span><span class="p">,</span> <span class="s2">&quot;match_group&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">idx</span>
        <span class="n">better</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">group</span><span class="p">,</span> <span class="s2">&quot;match_group_size&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>

    <span class="c1"># Get weights. I THINK this is right?! At least for with repeat=False?</span>
    <span class="n">t</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">treatment_column_name</span>
    <span class="n">better</span><span class="p">[</span><span class="s2">&quot;t_in_group&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">better</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;match_group&quot;</span><span class="p">)[</span><span class="n">t</span><span class="p">]</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">)</span>

    <span class="c1"># Make weights</span>
    <span class="n">better</span><span class="p">[</span><span class="s2">&quot;weights&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
    <span class="n">better</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">better</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;weights&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>  <span class="c1"># treaments are 1</span>

    <span class="c1"># Controls start as proportional to num of treatments</span>
    <span class="c1"># each observation is matched to.</span>
    <span class="n">better</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">better</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;weights&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">better</span><span class="p">[</span><span class="s2">&quot;t_in_group&quot;</span><span class="p">]</span> <span class="o">/</span> <span class="p">(</span>
        <span class="n">better</span><span class="p">[</span><span class="s2">&quot;match_group_size&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="n">better</span><span class="p">[</span><span class="s2">&quot;t_in_group&quot;</span><span class="p">]</span>
    <span class="p">)</span>

    <span class="c1"># Then re-normalize for num unique control observations.</span>
    <span class="n">control_weights</span> <span class="o">=</span> <span class="n">better</span><span class="p">[</span><span class="n">better</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">][</span><span class="s2">&quot;weights&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>

    <span class="n">num_control_obs</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">better</span><span class="p">[</span><span class="n">better</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">())</span>
    <span class="n">renormalization</span> <span class="o">=</span> <span class="n">num_control_obs</span> <span class="o">/</span> <span class="n">control_weights</span>
    <span class="n">better</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">better</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;weights&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">better</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">better</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;weights&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">renormalization</span>
    <span class="p">)</span>
    <span class="k">assert</span> <span class="n">better</span><span class="o">.</span><span class="n">weights</span><span class="o">.</span><span class="n">notnull</span><span class="p">()</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>

    <span class="n">better</span> <span class="o">=</span> <span class="n">better</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s2">&quot;t_in_group&quot;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="s2">&quot;columns&quot;</span><span class="p">)</span>

    <span class="c1"># Make sure right length and values!</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">result_of_fit</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">better</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">better</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">better</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;weights&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">==</span> <span class="n">num_control_obs</span>

    <span class="k">return</span> <span class="n">better</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">matched_data</span> <span class="o">=</span> <span class="n">get_dataframe</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
renormalization param: 3.72
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">matched_data</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>annual_earnings</th>
      <th>female</th>
      <th>simplified_race</th>
      <th>has_college</th>
      <th>county</th>
      <th>class94</th>
      <th>discretized_age</th>
      <th>match_group</th>
      <th>match_group_size</th>
      <th>weights</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>42900.0</td>
      <td>1</td>
      <td>0.0</td>
      <td>0</td>
      <td>10</td>
      <td>3</td>
      <td>5</td>
      <td>59.0</td>
      <td>5.0</td>
      <td>0.930000</td>
    </tr>
    <tr>
      <th>1</th>
      <td>31200.0</td>
      <td>0</td>
      <td>2.0</td>
      <td>0</td>
      <td>31</td>
      <td>3</td>
      <td>3</td>
      <td>411.0</td>
      <td>108.0</td>
      <td>0.070189</td>
    </tr>
    <tr>
      <th>2</th>
      <td>20020.0</td>
      <td>0</td>
      <td>0.0</td>
      <td>1</td>
      <td>8</td>
      <td>3</td>
      <td>6</td>
      <td>52.0</td>
      <td>3.0</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>3</th>
      <td>22859.2</td>
      <td>0</td>
      <td>0.0</td>
      <td>0</td>
      <td>44</td>
      <td>1</td>
      <td>4</td>
      <td>424.0</td>
      <td>28.0</td>
      <td>1.240000</td>
    </tr>
    <tr>
      <th>4</th>
      <td>73860.8</td>
      <td>0</td>
      <td>0.0</td>
      <td>1</td>
      <td>24</td>
      <td>3</td>
      <td>3</td>
      <td>106.0</td>
      <td>7.0</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</div>
</div>
<div class="section" id="Check-Your-Matches-and-Analyze">
<h2>Check Your Matches and Analyze<a class="headerlink" href="#Check-Your-Matches-and-Analyze" title="Permalink to this headline">¶</a></h2>
<div class="section" id="Exercise-12">
<h3>Exercise 12<a class="headerlink" href="#Exercise-12" title="Permalink to this headline">¶</a></h3>
<p>We previously tested balance on <code class="docutils literal notranslate"><span class="pre">simplified_race</span></code>, and by county. Check those again. Are there still statistically significant differences in college education by <code class="docutils literal notranslate"><span class="pre">simplified_race</span></code>?</p>
<p>Note that when you test for this, you’ll need to take into account the <code class="docutils literal notranslate"><span class="pre">weights</span></code> column you got back from <code class="docutils literal notranslate"><span class="pre">get_dataframe</span></code>. What DAME does is not actually the 1-to-1 matching described in our readings – instead, however many observations that exact match it finds it puts in the same “group”. (These groups are identified in the dataframe you got from <code class="docutils literal notranslate"><span class="pre">get_dataframe</span></code> by the column <code class="docutils literal notranslate"><span class="pre">match_group</span></code>, and the size of each group is in <code class="docutils literal notranslate"><span class="pre">match_group_size</span></code>.)</p>
<p>So to analyze the data, you need to use the <code class="docutils literal notranslate"><span class="pre">wls</span></code> (weighted least squares) function in <code class="docutils literal notranslate"><span class="pre">statsmodels</span></code>. For example, if your data is called <code class="docutils literal notranslate"><span class="pre">matched_data</span></code>, you might run:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">smf</span><span class="o">.</span><span class="n">wls</span><span class="p">(</span>
    <span class="s2">&quot;has_college ~ C(simplified_race)&quot;</span><span class="p">,</span> <span class="n">matched_data</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="n">matched_data</span><span class="p">[</span><span class="s2">&quot;weights&quot;</span><span class="p">]</span>
<span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">statsmodels.formula.api</span> <span class="k">as</span> <span class="nn">smf</span>

<span class="n">smf</span><span class="o">.</span><span class="n">wls</span><span class="p">(</span>
    <span class="s2">&quot;has_college ~ C(simplified_race)&quot;</span><span class="p">,</span> <span class="n">matched_data</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="n">matched_data</span><span class="p">[</span><span class="s2">&quot;weights&quot;</span><span class="p">]</span>
<span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<table class="simpletable">
<caption>WLS Regression Results</caption>
<tr>
  <th>Dep. Variable:</th>       <td>has_college</td>   <th>  R-squared:         </th> <td>   0.000</td>
</tr>
<tr>
  <th>Model:</th>                   <td>WLS</td>       <th>  Adj. R-squared:    </th> <td>  -0.001</td>
</tr>
<tr>
  <th>Method:</th>             <td>Least Squares</td>  <th>  F-statistic:       </th> <td>2.495e-12</td>
</tr>
<tr>
  <th>Date:</th>             <td>Tue, 23 Feb 2021</td> <th>  Prob (F-statistic):</th>  <td>  1.00</td>
</tr>
<tr>
  <th>Time:</th>                 <td>09:39:27</td>     <th>  Log-Likelihood:    </th> <td> -3736.0</td>
</tr>
<tr>
  <th>No. Observations:</th>      <td>  5310</td>      <th>  AIC:               </th> <td>   7480.</td>
</tr>
<tr>
  <th>Df Residuals:</th>          <td>  5306</td>      <th>  BIC:               </th> <td>   7506.</td>
</tr>
<tr>
  <th>Df Model:</th>              <td>     3</td>      <th>                     </th>     <td> </td>
</tr>
<tr>
  <th>Covariance Type:</th>      <td>nonrobust</td>    <th>                     </th>     <td> </td>
</tr>
</table>
<table class="simpletable">
<tr>
              <td></td>                 <th>coef</th>     <th>std err</th>      <th>t</th>      <th>P>|t|</th>  <th>[0.025</th>    <th>0.975]</th>
</tr>
<tr>
  <th>Intercept</th>                 <td>    0.2119</td> <td>    0.007</td> <td>   31.608</td> <td> 0.000</td> <td>    0.199</td> <td>    0.225</td>
</tr>
<tr>
  <th>C(simplified_race)[T.1.0]</th> <td> 1.648e-16</td> <td>    0.018</td> <td>  9.1e-15</td> <td> 1.000</td> <td>   -0.036</td> <td>    0.036</td>
</tr>
<tr>
  <th>C(simplified_race)[T.2.0]</th> <td>-4.337e-17</td> <td>    0.019</td> <td>-2.31e-15</td> <td> 1.000</td> <td>   -0.037</td> <td>    0.037</td>
</tr>
<tr>
  <th>C(simplified_race)[T.3.0]</th> <td>  8.76e-17</td> <td>    0.020</td> <td> 4.33e-15</td> <td> 1.000</td> <td>   -0.040</td> <td>    0.040</td>
</tr>
</table>
<table class="simpletable">
<tr>
  <th>Omnibus:</th>       <td>860.389</td> <th>  Durbin-Watson:     </th> <td>   2.000</td>
</tr>
<tr>
  <th>Prob(Omnibus):</th> <td> 0.000</td>  <th>  Jarque-Bera (JB):  </th> <td>1353.227</td>
</tr>
<tr>
  <th>Skew:</th>          <td> 1.234</td>  <th>  Prob(JB):          </th> <td>1.41e-294</td>
</tr>
<tr>
  <th>Kurtosis:</th>      <td> 2.851</td>  <th>  Cond. No.          </th> <td>    3.95</td>
</tr>
</table><br/><br/>Notes:<br/>[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.</div>
</div>
</div>
<div class="section" id="Exercise-13">
<h3>Exercise 13<a class="headerlink" href="#Exercise-13" title="Permalink to this headline">¶</a></h3>
<p>Now use a weighted least squares regression on your matched data to regress annual earnings on <em>just</em> having a college eduction. What is the apparent effect of a BA? How does that compare to our initial estimate using the raw CPS data (before matching)?</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">smf</span><span class="o">.</span><span class="n">wls</span><span class="p">(</span>
    <span class="s2">&quot;annual_earnings ~ has_college&quot;</span><span class="p">,</span> <span class="n">matched_data</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="n">matched_data</span><span class="p">[</span><span class="s2">&quot;weights&quot;</span><span class="p">]</span>
<span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<table class="simpletable">
<caption>WLS Regression Results</caption>
<tr>
  <th>Dep. Variable:</th>     <td>annual_earnings</td> <th>  R-squared:         </th> <td>   0.058</td>
</tr>
<tr>
  <th>Model:</th>                   <td>WLS</td>       <th>  Adj. R-squared:    </th> <td>   0.057</td>
</tr>
<tr>
  <th>Method:</th>             <td>Least Squares</td>  <th>  F-statistic:       </th> <td>   324.1</td>
</tr>
<tr>
  <th>Date:</th>             <td>Tue, 23 Feb 2021</td> <th>  Prob (F-statistic):</th> <td>2.19e-70</td>
</tr>
<tr>
  <th>Time:</th>                 <td>09:39:27</td>     <th>  Log-Likelihood:    </th> <td> -61753.</td>
</tr>
<tr>
  <th>No. Observations:</th>      <td>  5310</td>      <th>  AIC:               </th> <td>1.235e+05</td>
</tr>
<tr>
  <th>Df Residuals:</th>          <td>  5308</td>      <th>  BIC:               </th> <td>1.235e+05</td>
</tr>
<tr>
  <th>Df Model:</th>              <td>     1</td>      <th>                     </th>     <td> </td>
</tr>
<tr>
  <th>Covariance Type:</th>      <td>nonrobust</td>    <th>                     </th>     <td> </td>
</tr>
</table>
<table class="simpletable">
<tr>
       <td></td>          <th>coef</th>     <th>std err</th>      <th>t</th>      <th>P>|t|</th>  <th>[0.025</th>    <th>0.975]</th>
</tr>
<tr>
  <th>Intercept</th>   <td> 3.909e+04</td> <td>  351.293</td> <td>  111.287</td> <td> 0.000</td> <td> 3.84e+04</td> <td> 3.98e+04</td>
</tr>
<tr>
  <th>has_college</th> <td> 1.374e+04</td> <td>  763.203</td> <td>   18.003</td> <td> 0.000</td> <td> 1.22e+04</td> <td> 1.52e+04</td>
</tr>
</table>
<table class="simpletable">
<tr>
  <th>Omnibus:</th>       <td>2934.035</td> <th>  Durbin-Watson:     </th> <td>   2.006</td>
</tr>
<tr>
  <th>Prob(Omnibus):</th>  <td> 0.000</td>  <th>  Jarque-Bera (JB):  </th> <td>33100.529</td>
</tr>
<tr>
  <th>Skew:</th>           <td> 2.424</td>  <th>  Prob(JB):          </th> <td>    0.00</td>
</tr>
<tr>
  <th>Kurtosis:</th>       <td>14.230</td>  <th>  Cond. No.          </th> <td>    2.58</td>
</tr>
</table><br/><br/>Notes:<br/>[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[28]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">dame_flame</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">post_processing</span><span class="o">.</span><span class="n">ATE</span><span class="p">(</span><span class="n">matching_object</span><span class="o">=</span><span class="n">model</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[28]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
13564.430689800056
</pre></div></div>
</div>
</div>
<div class="section" id="Exercise-14">
<h3>Exercise 14<a class="headerlink" href="#Exercise-14" title="Permalink to this headline">¶</a></h3>
<p>Now include our other matching variables as controls. Does the coefficient change?</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">smf</span><span class="o">.</span><span class="n">wls</span><span class="p">(</span>
    <span class="s2">&quot;annual_earnings ~ has_college + C(simplified_race)&quot;</span>
    <span class="s2">&quot; + C(discretized_age) + female + C(county)&quot;</span><span class="p">,</span>
    <span class="n">matched_data</span><span class="p">,</span>
    <span class="n">weights</span><span class="o">=</span><span class="n">matched_data</span><span class="p">[</span><span class="s2">&quot;weights&quot;</span><span class="p">],</span>
<span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<table class="simpletable">
<caption>WLS Regression Results</caption>
<tr>
  <th>Dep. Variable:</th>     <td>annual_earnings</td> <th>  R-squared:         </th> <td>   0.238</td>
</tr>
<tr>
  <th>Model:</th>                   <td>WLS</td>       <th>  Adj. R-squared:    </th> <td>   0.188</td>
</tr>
<tr>
  <th>Method:</th>             <td>Least Squares</td>  <th>  F-statistic:       </th> <td>   4.786</td>
</tr>
<tr>
  <th>Date:</th>             <td>Tue, 23 Feb 2021</td> <th>  Prob (F-statistic):</th> <td>1.62e-132</td>
</tr>
<tr>
  <th>Time:</th>                 <td>09:39:28</td>     <th>  Log-Likelihood:    </th> <td> -61189.</td>
</tr>
<tr>
  <th>No. Observations:</th>      <td>  5310</td>      <th>  AIC:               </th> <td>1.230e+05</td>
</tr>
<tr>
  <th>Df Residuals:</th>          <td>  4984</td>      <th>  BIC:               </th> <td>1.252e+05</td>
</tr>
<tr>
  <th>Df Model:</th>              <td>   325</td>      <th>                     </th>     <td> </td>
</tr>
<tr>
  <th>Covariance Type:</th>      <td>nonrobust</td>    <th>                     </th>     <td> </td>
</tr>
</table>
<table class="simpletable">
<tr>
              <td></td>                 <th>coef</th>     <th>std err</th>      <th>t</th>      <th>P>|t|</th>  <th>[0.025</th>    <th>0.975]</th>
</tr>
<tr>
  <th>Intercept</th>                 <td> 4.761e+04</td> <td> 2429.505</td> <td>   19.595</td> <td> 0.000</td> <td> 4.28e+04</td> <td> 5.24e+04</td>
</tr>
<tr>
  <th>C(simplified_race)[T.1.0]</th> <td>-8344.9150</td> <td> 1067.331</td> <td>   -7.818</td> <td> 0.000</td> <td>-1.04e+04</td> <td>-6252.476</td>
</tr>
<tr>
  <th>C(simplified_race)[T.2.0]</th> <td>-6753.9175</td> <td> 1140.523</td> <td>   -5.922</td> <td> 0.000</td> <td>-8989.844</td> <td>-4517.991</td>
</tr>
<tr>
  <th>C(simplified_race)[T.3.0]</th> <td>-3220.6308</td> <td> 1202.997</td> <td>   -2.677</td> <td> 0.007</td> <td>-5579.035</td> <td> -862.227</td>
</tr>
<tr>
  <th>C(discretized_age)[T.3]</th>   <td> 8584.0505</td> <td>  868.037</td> <td>    9.889</td> <td> 0.000</td> <td> 6882.316</td> <td> 1.03e+04</td>
</tr>
<tr>
  <th>C(discretized_age)[T.4]</th>   <td> 1.251e+04</td> <td>  923.078</td> <td>   13.558</td> <td> 0.000</td> <td> 1.07e+04</td> <td> 1.43e+04</td>
</tr>
<tr>
  <th>C(discretized_age)[T.5]</th>   <td> 1.266e+04</td> <td>  964.214</td> <td>   13.131</td> <td> 0.000</td> <td> 1.08e+04</td> <td> 1.46e+04</td>
</tr>
<tr>
  <th>C(discretized_age)[T.6]</th>   <td> 9235.0616</td> <td> 1189.062</td> <td>    7.767</td> <td> 0.000</td> <td> 6903.976</td> <td> 1.16e+04</td>
</tr>
<tr>
  <th>C(discretized_age)[T.7]</th>   <td> 1.347e+04</td> <td> 2975.342</td> <td>    4.528</td> <td> 0.000</td> <td> 7639.580</td> <td> 1.93e+04</td>
</tr>
<tr>
  <th>C(county)[T.1]</th>            <td>-1.114e+04</td> <td> 3231.653</td> <td>   -3.446</td> <td> 0.001</td> <td>-1.75e+04</td> <td>-4799.550</td>
</tr>
<tr>
  <th>C(county)[T.2]</th>            <td>-1.279e+04</td> <td> 3245.734</td> <td>   -3.942</td> <td> 0.000</td> <td>-1.92e+04</td> <td>-6430.115</td>
</tr>
<tr>
  <th>C(county)[T.3]</th>            <td>-9142.9921</td> <td> 1.19e+04</td> <td>   -0.771</td> <td> 0.441</td> <td>-3.24e+04</td> <td> 1.41e+04</td>
</tr>
<tr>
  <th>C(county)[T.4]</th>            <td>-6471.4363</td> <td> 2990.234</td> <td>   -2.164</td> <td> 0.030</td> <td>-1.23e+04</td> <td> -609.261</td>
</tr>
<tr>
  <th>C(county)[T.5]</th>            <td>-6378.3577</td> <td> 4178.131</td> <td>   -1.527</td> <td> 0.127</td> <td>-1.46e+04</td> <td> 1812.617</td>
</tr>
<tr>
  <th>C(county)[T.6]</th>            <td>-1.627e+04</td> <td> 1.04e+04</td> <td>   -1.566</td> <td> 0.118</td> <td>-3.66e+04</td> <td> 4103.579</td>
</tr>
<tr>
  <th>C(county)[T.7]</th>            <td>-1.023e+04</td> <td> 3835.754</td> <td>   -2.666</td> <td> 0.008</td> <td>-1.77e+04</td> <td>-2706.649</td>
</tr>
<tr>
  <th>C(county)[T.8]</th>            <td>-1.153e+04</td> <td> 3175.916</td> <td>   -3.629</td> <td> 0.000</td> <td>-1.78e+04</td> <td>-5300.388</td>
</tr>
<tr>
  <th>C(county)[T.9]</th>            <td>-1.382e+04</td> <td> 5130.249</td> <td>   -2.694</td> <td> 0.007</td> <td>-2.39e+04</td> <td>-3762.096</td>
</tr>
<tr>
  <th>C(county)[T.10]</th>           <td>-1.501e+04</td> <td> 3427.926</td> <td>   -4.380</td> <td> 0.000</td> <td>-2.17e+04</td> <td>-8293.693</td>
</tr>
<tr>
  <th>C(county)[T.11]</th>           <td>-1.418e+04</td> <td> 3040.008</td> <td>   -4.664</td> <td> 0.000</td> <td>-2.01e+04</td> <td>-8218.173</td>
</tr>
<tr>
  <th>C(county)[T.12]</th>           <td>-6849.3954</td> <td> 3121.285</td> <td>   -2.194</td> <td> 0.028</td> <td> -1.3e+04</td> <td> -730.303</td>
</tr>
<tr>
  <th>C(county)[T.13]</th>           <td>-1.381e+04</td> <td> 3368.446</td> <td>   -4.101</td> <td> 0.000</td> <td>-2.04e+04</td> <td>-7209.235</td>
</tr>
<tr>
  <th>C(county)[T.14]</th>           <td>-1.369e+04</td> <td> 3918.748</td> <td>   -3.493</td> <td> 0.000</td> <td>-2.14e+04</td> <td>-6007.378</td>
</tr>
<tr>
  <th>C(county)[T.15]</th>           <td>-9190.4689</td> <td> 4799.618</td> <td>   -1.915</td> <td> 0.056</td> <td>-1.86e+04</td> <td>  218.895</td>
</tr>
<tr>
  <th>C(county)[T.16]</th>           <td>-1.061e+04</td> <td> 3616.372</td> <td>   -2.935</td> <td> 0.003</td> <td>-1.77e+04</td> <td>-3523.982</td>
</tr>
<tr>
  <th>C(county)[T.17]</th>           <td>-1.601e+04</td> <td> 7731.556</td> <td>   -2.070</td> <td> 0.038</td> <td>-3.12e+04</td> <td> -848.909</td>
</tr>
<tr>
  <th>C(county)[T.18]</th>           <td>-1788.7046</td> <td> 4787.690</td> <td>   -0.374</td> <td> 0.709</td> <td>-1.12e+04</td> <td> 7597.275</td>
</tr>
<tr>
  <th>C(county)[T.19]</th>           <td>-1.684e+04</td> <td> 6555.900</td> <td>   -2.569</td> <td> 0.010</td> <td>-2.97e+04</td> <td>-3989.067</td>
</tr>
<tr>
  <th>C(county)[T.20]</th>           <td>  -1.4e+04</td> <td> 4328.098</td> <td>   -3.235</td> <td> 0.001</td> <td>-2.25e+04</td> <td>-5515.772</td>
</tr>
<tr>
  <th>C(county)[T.21]</th>           <td>-6184.3776</td> <td> 3595.547</td> <td>   -1.720</td> <td> 0.085</td> <td>-1.32e+04</td> <td>  864.476</td>
</tr>
<tr>
  <th>C(county)[T.22]</th>           <td>-1.826e+04</td> <td> 3694.928</td> <td>   -4.941</td> <td> 0.000</td> <td>-2.55e+04</td> <td> -1.1e+04</td>
</tr>
<tr>
  <th>C(county)[T.23]</th>           <td>-1.242e+04</td> <td> 3244.837</td> <td>   -3.828</td> <td> 0.000</td> <td>-1.88e+04</td> <td>-6059.940</td>
</tr>
<tr>
  <th>C(county)[T.24]</th>           <td>-1.104e+04</td> <td> 3171.193</td> <td>   -3.482</td> <td> 0.001</td> <td>-1.73e+04</td> <td>-4824.300</td>
</tr>
<tr>
  <th>C(county)[T.25]</th>           <td>-1.506e+04</td> <td> 3496.105</td> <td>   -4.309</td> <td> 0.000</td> <td>-2.19e+04</td> <td>-8211.049</td>
</tr>
<tr>
  <th>C(county)[T.26]</th>           <td>-1.391e+04</td> <td> 3137.745</td> <td>   -4.432</td> <td> 0.000</td> <td>-2.01e+04</td> <td>-7755.819</td>
</tr>
<tr>
  <th>C(county)[T.27]</th>           <td>-1.337e+04</td> <td> 3345.523</td> <td>   -3.997</td> <td> 0.000</td> <td>-1.99e+04</td> <td>-6814.638</td>
</tr>
<tr>
  <th>C(county)[T.28]</th>           <td>-1.297e+04</td> <td> 5671.204</td> <td>   -2.287</td> <td> 0.022</td> <td>-2.41e+04</td> <td>-1853.870</td>
</tr>
<tr>
  <th>C(county)[T.29]</th>           <td>-4845.0790</td> <td> 5203.125</td> <td>   -0.931</td> <td> 0.352</td> <td> -1.5e+04</td> <td> 5355.335</td>
</tr>
<tr>
  <th>C(county)[T.30]</th>           <td>-2248.8602</td> <td> 5067.398</td> <td>   -0.444</td> <td> 0.657</td> <td>-1.22e+04</td> <td> 7685.469</td>
</tr>
<tr>
  <th>C(county)[T.31]</th>           <td>-1.155e+04</td> <td> 4710.979</td> <td>   -2.452</td> <td> 0.014</td> <td>-2.08e+04</td> <td>-2313.897</td>
</tr>
<tr>
  <th>C(county)[T.32]</th>           <td>-7114.5598</td> <td> 3632.908</td> <td>   -1.958</td> <td> 0.050</td> <td>-1.42e+04</td> <td>    7.538</td>
</tr>
<tr>
  <th>C(county)[T.33]</th>           <td>-1.272e+04</td> <td> 3067.035</td> <td>   -4.149</td> <td> 0.000</td> <td>-1.87e+04</td> <td>-6711.354</td>
</tr>
<tr>
  <th>C(county)[T.34]</th>           <td> -1.32e+04</td> <td> 3443.339</td> <td>   -3.833</td> <td> 0.000</td> <td>-1.99e+04</td> <td>-6447.428</td>
</tr>
<tr>
  <th>C(county)[T.35]</th>           <td>-9324.2429</td> <td> 3384.603</td> <td>   -2.755</td> <td> 0.006</td> <td> -1.6e+04</td> <td>-2688.932</td>
</tr>
<tr>
  <th>C(county)[T.36]</th>           <td>-1.505e+04</td> <td> 3658.198</td> <td>   -4.115</td> <td> 0.000</td> <td>-2.22e+04</td> <td>-7881.001</td>
</tr>
<tr>
  <th>C(county)[T.37]</th>           <td>-1.023e+04</td> <td> 3762.247</td> <td>   -2.720</td> <td> 0.007</td> <td>-1.76e+04</td> <td>-2856.766</td>
</tr>
<tr>
  <th>C(county)[T.38]</th>           <td>-1.308e+04</td> <td> 3310.408</td> <td>   -3.951</td> <td> 0.000</td> <td>-1.96e+04</td> <td>-6590.153</td>
</tr>
<tr>
  <th>C(county)[T.39]</th>           <td>-1.177e+04</td> <td> 3252.230</td> <td>   -3.618</td> <td> 0.000</td> <td>-1.81e+04</td> <td>-5391.513</td>
</tr>
<tr>
  <th>C(county)[T.40]</th>           <td>-1.516e+04</td> <td> 3677.299</td> <td>   -4.123</td> <td> 0.000</td> <td>-2.24e+04</td> <td>-7954.028</td>
</tr>
<tr>
  <th>C(county)[T.41]</th>           <td>-9224.6049</td> <td> 2690.524</td> <td>   -3.429</td> <td> 0.001</td> <td>-1.45e+04</td> <td>-3949.994</td>
</tr>
<tr>
  <th>C(county)[T.42]</th>           <td>-1.365e+04</td> <td> 3460.095</td> <td>   -3.944</td> <td> 0.000</td> <td>-2.04e+04</td> <td>-6864.991</td>
</tr>
<tr>
  <th>C(county)[T.43]</th>           <td>-1.165e+04</td> <td> 3698.161</td> <td>   -3.151</td> <td> 0.002</td> <td>-1.89e+04</td> <td>-4404.402</td>
</tr>
<tr>
  <th>C(county)[T.44]</th>           <td> -1.07e+04</td> <td> 2961.782</td> <td>   -3.611</td> <td> 0.000</td> <td>-1.65e+04</td> <td>-4889.799</td>
</tr>
<tr>
  <th>C(county)[T.45]</th>           <td>-7052.4496</td> <td> 3127.876</td> <td>   -2.255</td> <td> 0.024</td> <td>-1.32e+04</td> <td> -920.437</td>
</tr>
<tr>
  <th>C(county)[T.46]</th>           <td>-9064.0230</td> <td> 3380.497</td> <td>   -2.681</td> <td> 0.007</td> <td>-1.57e+04</td> <td>-2436.761</td>
</tr>
<tr>
  <th>C(county)[T.47]</th>           <td>-1.681e+04</td> <td> 3013.844</td> <td>   -5.579</td> <td> 0.000</td> <td>-2.27e+04</td> <td>-1.09e+04</td>
</tr>
<tr>
  <th>C(county)[T.48]</th>           <td>-8897.8731</td> <td> 3296.249</td> <td>   -2.699</td> <td> 0.007</td> <td>-1.54e+04</td> <td>-2435.774</td>
</tr>
<tr>
  <th>C(county)[T.49]</th>           <td> 2.125e+04</td> <td> 7993.324</td> <td>    2.659</td> <td> 0.008</td> <td> 5580.256</td> <td> 3.69e+04</td>
</tr>
<tr>
  <th>C(county)[T.50]</th>           <td>-2.251e+04</td> <td> 1.13e+04</td> <td>   -1.997</td> <td> 0.046</td> <td>-4.46e+04</td> <td> -409.459</td>
</tr>
<tr>
  <th>C(county)[T.51]</th>           <td>-5880.2544</td> <td> 3452.043</td> <td>   -1.703</td> <td> 0.089</td> <td>-1.26e+04</td> <td>  887.270</td>
</tr>
<tr>
  <th>C(county)[T.52]</th>           <td>-1.006e+04</td> <td> 8297.064</td> <td>   -1.213</td> <td> 0.225</td> <td>-2.63e+04</td> <td> 6201.302</td>
</tr>
<tr>
  <th>C(county)[T.53]</th>           <td>-7396.8710</td> <td> 1.97e+04</td> <td>   -0.376</td> <td> 0.707</td> <td>-4.59e+04</td> <td> 3.12e+04</td>
</tr>
<tr>
  <th>C(county)[T.54]</th>           <td>-1.349e+04</td> <td> 8853.843</td> <td>   -1.524</td> <td> 0.128</td> <td>-3.08e+04</td> <td> 3865.030</td>
</tr>
<tr>
  <th>C(county)[T.55]</th>           <td> 6016.8132</td> <td> 9691.581</td> <td>    0.621</td> <td> 0.535</td> <td> -1.3e+04</td> <td>  2.5e+04</td>
</tr>
<tr>
  <th>C(county)[T.56]</th>           <td>-7435.2407</td> <td> 7281.280</td> <td>   -1.021</td> <td> 0.307</td> <td>-2.17e+04</td> <td> 6839.272</td>
</tr>
<tr>
  <th>C(county)[T.57]</th>           <td> 8434.9441</td> <td>  1.4e+04</td> <td>    0.604</td> <td> 0.546</td> <td>-1.89e+04</td> <td> 3.58e+04</td>
</tr>
<tr>
  <th>C(county)[T.58]</th>           <td>-5918.5652</td> <td> 5278.657</td> <td>   -1.121</td> <td> 0.262</td> <td>-1.63e+04</td> <td> 4429.925</td>
</tr>
<tr>
  <th>C(county)[T.59]</th>           <td>-1.631e+04</td> <td> 9894.838</td> <td>   -1.649</td> <td> 0.099</td> <td>-3.57e+04</td> <td> 3086.114</td>
</tr>
<tr>
  <th>C(county)[T.60]</th>           <td>-1.499e+04</td> <td> 6719.761</td> <td>   -2.231</td> <td> 0.026</td> <td>-2.82e+04</td> <td>-1819.273</td>
</tr>
<tr>
  <th>C(county)[T.61]</th>           <td>-8015.9218</td> <td> 1.09e+04</td> <td>   -0.732</td> <td> 0.464</td> <td>-2.95e+04</td> <td> 1.34e+04</td>
</tr>
<tr>
  <th>C(county)[T.62]</th>           <td> 1.171e+04</td> <td> 1.32e+04</td> <td>    0.884</td> <td> 0.377</td> <td>-1.43e+04</td> <td> 3.77e+04</td>
</tr>
<tr>
  <th>C(county)[T.63]</th>           <td>-1.124e+04</td> <td> 8626.461</td> <td>   -1.303</td> <td> 0.193</td> <td>-2.82e+04</td> <td> 5671.473</td>
</tr>
<tr>
  <th>C(county)[T.64]</th>           <td>  1.57e+04</td> <td> 8596.970</td> <td>    1.826</td> <td> 0.068</td> <td>-1156.314</td> <td> 3.26e+04</td>
</tr>
<tr>
  <th>C(county)[T.65]</th>           <td>-1.964e+04</td> <td> 9254.939</td> <td>   -2.122</td> <td> 0.034</td> <td>-3.78e+04</td> <td>-1498.590</td>
</tr>
<tr>
  <th>C(county)[T.66]</th>           <td>-2.286e+04</td> <td> 1.47e+04</td> <td>   -1.550</td> <td> 0.121</td> <td>-5.18e+04</td> <td> 6046.864</td>
</tr>
<tr>
  <th>C(county)[T.67]</th>           <td>-1.286e+04</td> <td> 2.97e+04</td> <td>   -0.434</td> <td> 0.664</td> <td> -7.1e+04</td> <td> 4.53e+04</td>
</tr>
<tr>
  <th>C(county)[T.68]</th>           <td>  265.8046</td> <td> 9594.437</td> <td>    0.028</td> <td> 0.978</td> <td>-1.85e+04</td> <td> 1.91e+04</td>
</tr>
<tr>
  <th>C(county)[T.69]</th>           <td>-1.382e+04</td> <td> 9042.247</td> <td>   -1.528</td> <td> 0.127</td> <td>-3.15e+04</td> <td> 3909.886</td>
</tr>
<tr>
  <th>C(county)[T.70]</th>           <td>-2.086e+04</td> <td> 1.33e+04</td> <td>   -1.567</td> <td> 0.117</td> <td> -4.7e+04</td> <td> 5231.063</td>
</tr>
<tr>
  <th>C(county)[T.71]</th>           <td>-1.914e+04</td> <td> 8999.435</td> <td>   -2.127</td> <td> 0.033</td> <td>-3.68e+04</td> <td>-1501.949</td>
</tr>
<tr>
  <th>C(county)[T.72]</th>           <td> 1.203e+04</td> <td> 1.91e+04</td> <td>    0.630</td> <td> 0.528</td> <td>-2.54e+04</td> <td> 4.95e+04</td>
</tr>
<tr>
  <th>C(county)[T.73]</th>           <td>-4151.5319</td> <td> 5648.737</td> <td>   -0.735</td> <td> 0.462</td> <td>-1.52e+04</td> <td> 6922.479</td>
</tr>
<tr>
  <th>C(county)[T.74]</th>           <td>-1.341e+04</td> <td> 7534.403</td> <td>   -1.780</td> <td> 0.075</td> <td>-2.82e+04</td> <td> 1357.560</td>
</tr>
<tr>
  <th>C(county)[T.75]</th>           <td>-1.719e+04</td> <td> 3924.766</td> <td>   -4.381</td> <td> 0.000</td> <td>-2.49e+04</td> <td>-9500.690</td>
</tr>
<tr>
  <th>C(county)[T.76]</th>           <td>-3.746e+04</td> <td> 2.62e+04</td> <td>   -1.430</td> <td> 0.153</td> <td>-8.88e+04</td> <td> 1.39e+04</td>
</tr>
<tr>
  <th>C(county)[T.77]</th>           <td>  237.8624</td> <td> 6897.951</td> <td>    0.034</td> <td> 0.972</td> <td>-1.33e+04</td> <td> 1.38e+04</td>
</tr>
<tr>
  <th>C(county)[T.78]</th>           <td> 6770.8989</td> <td> 2.24e+04</td> <td>    0.302</td> <td> 0.763</td> <td>-3.72e+04</td> <td> 5.07e+04</td>
</tr>
<tr>
  <th>C(county)[T.79]</th>           <td> 4.146e+04</td> <td> 8462.736</td> <td>    4.899</td> <td> 0.000</td> <td> 2.49e+04</td> <td>  5.8e+04</td>
</tr>
<tr>
  <th>C(county)[T.80]</th>           <td>-1.741e+04</td> <td> 5589.953</td> <td>   -3.115</td> <td> 0.002</td> <td>-2.84e+04</td> <td>-6454.909</td>
</tr>
<tr>
  <th>C(county)[T.81]</th>           <td>-1.143e+04</td> <td> 5721.800</td> <td>   -1.998</td> <td> 0.046</td> <td>-2.27e+04</td> <td> -216.304</td>
</tr>
<tr>
  <th>C(county)[T.82]</th>           <td>-1.658e+04</td> <td> 1.61e+04</td> <td>   -1.032</td> <td> 0.302</td> <td>-4.81e+04</td> <td> 1.49e+04</td>
</tr>
<tr>
  <th>C(county)[T.83]</th>           <td>-2.307e+04</td> <td> 1.25e+04</td> <td>   -1.840</td> <td> 0.066</td> <td>-4.77e+04</td> <td> 1514.953</td>
</tr>
<tr>
  <th>C(county)[T.84]</th>           <td>-8999.9730</td> <td> 1.22e+04</td> <td>   -0.740</td> <td> 0.459</td> <td>-3.28e+04</td> <td> 1.48e+04</td>
</tr>
<tr>
  <th>C(county)[T.85]</th>           <td> 3419.8384</td> <td> 9046.856</td> <td>    0.378</td> <td> 0.705</td> <td>-1.43e+04</td> <td> 2.12e+04</td>
</tr>
<tr>
  <th>C(county)[T.86]</th>           <td> 1.824e+04</td> <td> 1.43e+04</td> <td>    1.279</td> <td> 0.201</td> <td>-9720.390</td> <td> 4.62e+04</td>
</tr>
<tr>
  <th>C(county)[T.87]</th>           <td>-2.403e+04</td> <td> 1.09e+04</td> <td>   -2.205</td> <td> 0.027</td> <td>-4.54e+04</td> <td>-2667.316</td>
</tr>
<tr>
  <th>C(county)[T.88]</th>           <td>-1.326e+04</td> <td> 1.74e+04</td> <td>   -0.763</td> <td> 0.445</td> <td>-4.73e+04</td> <td> 2.08e+04</td>
</tr>
<tr>
  <th>C(county)[T.89]</th>           <td>-1.574e+04</td> <td> 8531.472</td> <td>   -1.845</td> <td> 0.065</td> <td>-3.25e+04</td> <td>  985.816</td>
</tr>
<tr>
  <th>C(county)[T.90]</th>           <td>-8870.8793</td> <td> 4968.614</td> <td>   -1.785</td> <td> 0.074</td> <td>-1.86e+04</td> <td>  869.791</td>
</tr>
<tr>
  <th>C(county)[T.91]</th>           <td> -1.04e+04</td> <td> 9791.880</td> <td>   -1.062</td> <td> 0.288</td> <td>-2.96e+04</td> <td> 8799.744</td>
</tr>
<tr>
  <th>C(county)[T.92]</th>           <td>-1.687e+04</td> <td> 1.17e+04</td> <td>   -1.441</td> <td> 0.150</td> <td>-3.98e+04</td> <td> 6076.622</td>
</tr>
<tr>
  <th>C(county)[T.93]</th>           <td>-4593.8182</td> <td> 9052.966</td> <td>   -0.507</td> <td> 0.612</td> <td>-2.23e+04</td> <td> 1.32e+04</td>
</tr>
<tr>
  <th>C(county)[T.94]</th>           <td>  -66.5470</td> <td> 9761.637</td> <td>   -0.007</td> <td> 0.995</td> <td>-1.92e+04</td> <td> 1.91e+04</td>
</tr>
<tr>
  <th>C(county)[T.95]</th>           <td>-1.199e+04</td> <td> 5085.007</td> <td>   -2.357</td> <td> 0.018</td> <td> -2.2e+04</td> <td>-2017.441</td>
</tr>
<tr>
  <th>C(county)[T.96]</th>           <td> -1.27e+04</td> <td> 1.03e+04</td> <td>   -1.228</td> <td> 0.219</td> <td> -3.3e+04</td> <td> 7572.284</td>
</tr>
<tr>
  <th>C(county)[T.97]</th>           <td>-2.457e+04</td> <td> 9432.408</td> <td>   -2.605</td> <td> 0.009</td> <td>-4.31e+04</td> <td>-6080.404</td>
</tr>
<tr>
  <th>C(county)[T.98]</th>           <td> 2197.3011</td> <td> 1.53e+04</td> <td>    0.144</td> <td> 0.886</td> <td>-2.78e+04</td> <td> 3.22e+04</td>
</tr>
<tr>
  <th>C(county)[T.99]</th>           <td>-9289.2093</td> <td> 3098.282</td> <td>   -2.998</td> <td> 0.003</td> <td>-1.54e+04</td> <td>-3215.213</td>
</tr>
<tr>
  <th>C(county)[T.100]</th>          <td> 1.121e+04</td> <td> 7876.656</td> <td>    1.423</td> <td> 0.155</td> <td>-4235.032</td> <td> 2.66e+04</td>
</tr>
<tr>
  <th>C(county)[T.101]</th>          <td>-1.684e+04</td> <td> 9598.189</td> <td>   -1.754</td> <td> 0.079</td> <td>-3.57e+04</td> <td> 1979.720</td>
</tr>
<tr>
  <th>C(county)[T.102]</th>          <td>-2597.8743</td> <td> 1.35e+04</td> <td>   -0.192</td> <td> 0.847</td> <td>-2.91e+04</td> <td> 2.39e+04</td>
</tr>
<tr>
  <th>C(county)[T.103]</th>          <td>-1.014e+04</td> <td> 9066.754</td> <td>   -1.118</td> <td> 0.264</td> <td>-2.79e+04</td> <td> 7638.542</td>
</tr>
<tr>
  <th>C(county)[T.104]</th>          <td> -252.2631</td> <td> 1.16e+04</td> <td>   -0.022</td> <td> 0.983</td> <td> -2.3e+04</td> <td> 2.25e+04</td>
</tr>
<tr>
  <th>C(county)[T.105]</th>          <td>-1.145e+04</td> <td>  1.3e+04</td> <td>   -0.880</td> <td> 0.379</td> <td> -3.7e+04</td> <td> 1.41e+04</td>
</tr>
<tr>
  <th>C(county)[T.106]</th>          <td>-3.539e+04</td> <td> 3.35e+04</td> <td>   -1.055</td> <td> 0.291</td> <td>-1.01e+05</td> <td> 3.03e+04</td>
</tr>
<tr>
  <th>C(county)[T.107]</th>          <td>-3.364e+04</td> <td> 1.71e+04</td> <td>   -1.962</td> <td> 0.050</td> <td>-6.72e+04</td> <td>  -29.720</td>
</tr>
<tr>
  <th>C(county)[T.109]</th>          <td>-4795.8027</td> <td> 8034.001</td> <td>   -0.597</td> <td> 0.551</td> <td>-2.05e+04</td> <td>  1.1e+04</td>
</tr>
<tr>
  <th>C(county)[T.110]</th>          <td>-8716.5745</td> <td> 1.06e+04</td> <td>   -0.822</td> <td> 0.411</td> <td>-2.95e+04</td> <td> 1.21e+04</td>
</tr>
<tr>
  <th>C(county)[T.111]</th>          <td>-1.946e+04</td> <td> 2.19e+04</td> <td>   -0.889</td> <td> 0.374</td> <td>-6.24e+04</td> <td> 2.35e+04</td>
</tr>
<tr>
  <th>C(county)[T.112]</th>          <td>-7351.2007</td> <td> 1.42e+04</td> <td>   -0.516</td> <td> 0.606</td> <td>-3.53e+04</td> <td> 2.06e+04</td>
</tr>
<tr>
  <th>C(county)[T.113]</th>          <td>-2.293e+04</td> <td>  2.6e+04</td> <td>   -0.882</td> <td> 0.378</td> <td>-7.39e+04</td> <td>  2.8e+04</td>
</tr>
<tr>
  <th>C(county)[T.114]</th>          <td>-1.908e+04</td> <td> 1.61e+04</td> <td>   -1.185</td> <td> 0.236</td> <td>-5.07e+04</td> <td> 1.25e+04</td>
</tr>
<tr>
  <th>C(county)[T.115]</th>          <td>-2798.0105</td> <td>    1e+04</td> <td>   -0.280</td> <td> 0.780</td> <td>-2.24e+04</td> <td> 1.68e+04</td>
</tr>
<tr>
  <th>C(county)[T.116]</th>          <td>-8785.2988</td> <td> 1.35e+04</td> <td>   -0.650</td> <td> 0.516</td> <td>-3.53e+04</td> <td> 1.77e+04</td>
</tr>
<tr>
  <th>C(county)[T.117]</th>          <td>-2.473e+04</td> <td> 4.28e+04</td> <td>   -0.577</td> <td> 0.564</td> <td>-1.09e+05</td> <td> 5.92e+04</td>
</tr>
<tr>
  <th>C(county)[T.118]</th>          <td>-1.698e+04</td> <td>  1.1e+04</td> <td>   -1.538</td> <td> 0.124</td> <td>-3.86e+04</td> <td> 4669.861</td>
</tr>
<tr>
  <th>C(county)[T.120]</th>          <td>-1.704e+04</td> <td> 1.32e+04</td> <td>   -1.287</td> <td> 0.198</td> <td> -4.3e+04</td> <td> 8908.447</td>
</tr>
<tr>
  <th>C(county)[T.121]</th>          <td>-2.767e+04</td> <td> 1.32e+04</td> <td>   -2.093</td> <td> 0.036</td> <td>-5.36e+04</td> <td>-1747.007</td>
</tr>
<tr>
  <th>C(county)[T.123]</th>          <td>-1.291e+04</td> <td> 5091.347</td> <td>   -2.536</td> <td> 0.011</td> <td>-2.29e+04</td> <td>-2931.559</td>
</tr>
<tr>
  <th>C(county)[T.124]</th>          <td>-3.209e+04</td> <td>    1e+04</td> <td>   -3.197</td> <td> 0.001</td> <td>-5.18e+04</td> <td>-1.24e+04</td>
</tr>
<tr>
  <th>C(county)[T.125]</th>          <td>-1.795e+04</td> <td> 1.25e+04</td> <td>   -1.440</td> <td> 0.150</td> <td>-4.24e+04</td> <td> 6490.095</td>
</tr>
<tr>
  <th>C(county)[T.126]</th>          <td>-6948.1460</td> <td> 9793.690</td> <td>   -0.709</td> <td> 0.478</td> <td>-2.61e+04</td> <td> 1.23e+04</td>
</tr>
<tr>
  <th>C(county)[T.127]</th>          <td>-4111.7736</td> <td> 9598.180</td> <td>   -0.428</td> <td> 0.668</td> <td>-2.29e+04</td> <td> 1.47e+04</td>
</tr>
<tr>
  <th>C(county)[T.128]</th>          <td>-1.407e+04</td> <td> 3.35e+04</td> <td>   -0.420</td> <td> 0.675</td> <td>-7.98e+04</td> <td> 5.17e+04</td>
</tr>
<tr>
  <th>C(county)[T.129]</th>          <td>-1.338e+04</td> <td> 1.22e+04</td> <td>   -1.094</td> <td> 0.274</td> <td>-3.73e+04</td> <td> 1.06e+04</td>
</tr>
<tr>
  <th>C(county)[T.130]</th>          <td>-2.958e+04</td> <td> 1.24e+04</td> <td>   -2.379</td> <td> 0.017</td> <td> -5.4e+04</td> <td>-5205.688</td>
</tr>
<tr>
  <th>C(county)[T.131]</th>          <td>-9462.1890</td> <td> 2.13e+04</td> <td>   -0.445</td> <td> 0.656</td> <td>-5.11e+04</td> <td> 3.22e+04</td>
</tr>
<tr>
  <th>C(county)[T.132]</th>          <td>-7889.2394</td> <td> 5638.330</td> <td>   -1.399</td> <td> 0.162</td> <td>-1.89e+04</td> <td> 3164.369</td>
</tr>
<tr>
  <th>C(county)[T.133]</th>          <td> 2175.4884</td> <td> 1.51e+04</td> <td>    0.144</td> <td> 0.886</td> <td>-2.75e+04</td> <td> 3.18e+04</td>
</tr>
<tr>
  <th>C(county)[T.134]</th>          <td> 5.467e+04</td> <td>  1.8e+04</td> <td>    3.045</td> <td> 0.002</td> <td> 1.95e+04</td> <td> 8.99e+04</td>
</tr>
<tr>
  <th>C(county)[T.135]</th>          <td>-2.083e+04</td> <td> 1.38e+04</td> <td>   -1.509</td> <td> 0.131</td> <td>-4.79e+04</td> <td> 6228.141</td>
</tr>
<tr>
  <th>C(county)[T.136]</th>          <td>-4420.8608</td> <td> 5997.620</td> <td>   -0.737</td> <td> 0.461</td> <td>-1.62e+04</td> <td> 7337.113</td>
</tr>
<tr>
  <th>C(county)[T.137]</th>          <td>-4087.2387</td> <td> 8100.626</td> <td>   -0.505</td> <td> 0.614</td> <td>   -2e+04</td> <td> 1.18e+04</td>
</tr>
<tr>
  <th>C(county)[T.138]</th>          <td>-7939.1789</td> <td> 8029.739</td> <td>   -0.989</td> <td> 0.323</td> <td>-2.37e+04</td> <td> 7802.643</td>
</tr>
<tr>
  <th>C(county)[T.139]</th>          <td> -692.3178</td> <td> 1.02e+04</td> <td>   -0.068</td> <td> 0.946</td> <td>-2.08e+04</td> <td> 1.94e+04</td>
</tr>
<tr>
  <th>C(county)[T.140]</th>          <td>-1.651e+04</td> <td> 1.37e+04</td> <td>   -1.202</td> <td> 0.229</td> <td>-4.34e+04</td> <td> 1.04e+04</td>
</tr>
<tr>
  <th>C(county)[T.141]</th>          <td>-8251.4595</td> <td> 1.22e+04</td> <td>   -0.676</td> <td> 0.499</td> <td>-3.22e+04</td> <td> 1.57e+04</td>
</tr>
<tr>
  <th>C(county)[T.142]</th>          <td>-1373.8309</td> <td> 2.13e+04</td> <td>   -0.065</td> <td> 0.948</td> <td> -4.3e+04</td> <td> 4.03e+04</td>
</tr>
<tr>
  <th>C(county)[T.143]</th>          <td>-5545.8845</td> <td> 5862.828</td> <td>   -0.946</td> <td> 0.344</td> <td> -1.7e+04</td> <td> 5947.838</td>
</tr>
<tr>
  <th>C(county)[T.144]</th>          <td>-4.741e+04</td> <td> 2.12e+04</td> <td>   -2.232</td> <td> 0.026</td> <td>-8.91e+04</td> <td>-5771.921</td>
</tr>
<tr>
  <th>C(county)[T.145]</th>          <td>-9556.0440</td> <td> 3.47e+04</td> <td>   -0.276</td> <td> 0.783</td> <td>-7.75e+04</td> <td> 5.84e+04</td>
</tr>
<tr>
  <th>C(county)[T.146]</th>          <td>-1.903e+04</td> <td> 1.59e+04</td> <td>   -1.196</td> <td> 0.232</td> <td>-5.02e+04</td> <td> 1.22e+04</td>
</tr>
<tr>
  <th>C(county)[T.147]</th>          <td>  -2.8e+04</td> <td> 1.52e+04</td> <td>   -1.848</td> <td> 0.065</td> <td>-5.77e+04</td> <td> 1707.239</td>
</tr>
<tr>
  <th>C(county)[T.148]</th>          <td>-2.012e+04</td> <td> 1.76e+04</td> <td>   -1.146</td> <td> 0.252</td> <td>-5.45e+04</td> <td> 1.43e+04</td>
</tr>
<tr>
  <th>C(county)[T.149]</th>          <td>-1.012e+04</td> <td> 4824.670</td> <td>   -2.097</td> <td> 0.036</td> <td>-1.96e+04</td> <td> -657.758</td>
</tr>
<tr>
  <th>C(county)[T.150]</th>          <td>-2.052e+04</td> <td> 3.35e+04</td> <td>   -0.612</td> <td> 0.541</td> <td>-8.63e+04</td> <td> 4.52e+04</td>
</tr>
<tr>
  <th>C(county)[T.151]</th>          <td>-2.235e+04</td> <td> 1.13e+04</td> <td>   -1.974</td> <td> 0.048</td> <td>-4.45e+04</td> <td> -157.867</td>
</tr>
<tr>
  <th>C(county)[T.152]</th>          <td>-1.249e+04</td> <td> 7332.914</td> <td>   -1.703</td> <td> 0.089</td> <td>-2.69e+04</td> <td> 1887.273</td>
</tr>
<tr>
  <th>C(county)[T.153]</th>          <td>-1.074e+04</td> <td> 2.99e+04</td> <td>   -0.360</td> <td> 0.719</td> <td>-6.93e+04</td> <td> 4.78e+04</td>
</tr>
<tr>
  <th>C(county)[T.155]</th>          <td>-1.174e+04</td> <td> 1.32e+04</td> <td>   -0.892</td> <td> 0.373</td> <td>-3.75e+04</td> <td> 1.41e+04</td>
</tr>
<tr>
  <th>C(county)[T.157]</th>          <td>-2.379e+04</td> <td> 1.34e+04</td> <td>   -1.777</td> <td> 0.076</td> <td>   -5e+04</td> <td> 2454.505</td>
</tr>
<tr>
  <th>C(county)[T.158]</th>          <td> -3.57e+04</td> <td> 1.24e+04</td> <td>   -2.878</td> <td> 0.004</td> <td>   -6e+04</td> <td>-1.14e+04</td>
</tr>
<tr>
  <th>C(county)[T.159]</th>          <td>-3961.2072</td> <td> 2.67e+04</td> <td>   -0.149</td> <td> 0.882</td> <td>-5.62e+04</td> <td> 4.83e+04</td>
</tr>
<tr>
  <th>C(county)[T.160]</th>          <td>-1.811e+04</td> <td> 8356.451</td> <td>   -2.167</td> <td> 0.030</td> <td>-3.45e+04</td> <td>-1729.232</td>
</tr>
<tr>
  <th>C(county)[T.161]</th>          <td> 6091.1910</td> <td> 8574.294</td> <td>    0.710</td> <td> 0.477</td> <td>-1.07e+04</td> <td> 2.29e+04</td>
</tr>
<tr>
  <th>C(county)[T.162]</th>          <td> 9087.0830</td> <td> 1.55e+04</td> <td>    0.586</td> <td> 0.558</td> <td>-2.13e+04</td> <td> 3.95e+04</td>
</tr>
<tr>
  <th>C(county)[T.163]</th>          <td>-2.133e+04</td> <td> 2.02e+04</td> <td>   -1.054</td> <td> 0.292</td> <td> -6.1e+04</td> <td> 1.84e+04</td>
</tr>
<tr>
  <th>C(county)[T.164]</th>          <td>-2.283e+04</td> <td> 1.51e+04</td> <td>   -1.511</td> <td> 0.131</td> <td>-5.24e+04</td> <td> 6795.581</td>
</tr>
<tr>
  <th>C(county)[T.165]</th>          <td> -2.21e+04</td> <td> 2.13e+04</td> <td>   -1.037</td> <td> 0.300</td> <td>-6.39e+04</td> <td> 1.97e+04</td>
</tr>
<tr>
  <th>C(county)[T.166]</th>          <td>-1.551e+04</td> <td> 9441.670</td> <td>   -1.642</td> <td> 0.101</td> <td> -3.4e+04</td> <td> 3002.990</td>
</tr>
<tr>
  <th>C(county)[T.167]</th>          <td>-3.947e+04</td> <td> 3.24e+04</td> <td>   -1.218</td> <td> 0.223</td> <td>-1.03e+05</td> <td> 2.41e+04</td>
</tr>
<tr>
  <th>C(county)[T.168]</th>          <td> 1.007e+04</td> <td> 7103.076</td> <td>    1.417</td> <td> 0.156</td> <td>-3857.374</td> <td>  2.4e+04</td>
</tr>
<tr>
  <th>C(county)[T.169]</th>          <td> 1.283e+04</td> <td> 1.14e+04</td> <td>    1.121</td> <td> 0.262</td> <td>-9600.934</td> <td> 3.53e+04</td>
</tr>
<tr>
  <th>C(county)[T.170]</th>          <td>-1.615e+04</td> <td>  1.4e+04</td> <td>   -1.150</td> <td> 0.250</td> <td>-4.37e+04</td> <td> 1.14e+04</td>
</tr>
<tr>
  <th>C(county)[T.171]</th>          <td> 2.365e+04</td> <td> 7177.844</td> <td>    3.295</td> <td> 0.001</td> <td> 9576.024</td> <td> 3.77e+04</td>
</tr>
<tr>
  <th>C(county)[T.172]</th>          <td>-3.626e+04</td> <td> 3.24e+04</td> <td>   -1.119</td> <td> 0.263</td> <td>-9.98e+04</td> <td> 2.73e+04</td>
</tr>
<tr>
  <th>C(county)[T.173]</th>          <td>-2.629e+04</td> <td> 2.38e+04</td> <td>   -1.106</td> <td> 0.269</td> <td>-7.29e+04</td> <td> 2.03e+04</td>
</tr>
<tr>
  <th>C(county)[T.174]</th>          <td>-2.314e+04</td> <td> 1.59e+04</td> <td>   -1.458</td> <td> 0.145</td> <td>-5.43e+04</td> <td> 7983.357</td>
</tr>
<tr>
  <th>C(county)[T.176]</th>          <td>-8331.5679</td> <td> 1.76e+04</td> <td>   -0.472</td> <td> 0.637</td> <td>-4.29e+04</td> <td> 2.62e+04</td>
</tr>
<tr>
  <th>C(county)[T.177]</th>          <td>-7787.9729</td> <td> 6943.898</td> <td>   -1.122</td> <td> 0.262</td> <td>-2.14e+04</td> <td> 5825.123</td>
</tr>
<tr>
  <th>C(county)[T.178]</th>          <td>-8426.9047</td> <td> 9527.061</td> <td>   -0.885</td> <td> 0.376</td> <td>-2.71e+04</td> <td> 1.03e+04</td>
</tr>
<tr>
  <th>C(county)[T.179]</th>          <td> 5061.4958</td> <td> 9108.387</td> <td>    0.556</td> <td> 0.578</td> <td>-1.28e+04</td> <td> 2.29e+04</td>
</tr>
<tr>
  <th>C(county)[T.180]</th>          <td>-9156.0300</td> <td> 7253.999</td> <td>   -1.262</td> <td> 0.207</td> <td>-2.34e+04</td> <td> 5065.000</td>
</tr>
<tr>
  <th>C(county)[T.181]</th>          <td>-6042.8525</td> <td> 1.16e+04</td> <td>   -0.522</td> <td> 0.602</td> <td>-2.87e+04</td> <td> 1.67e+04</td>
</tr>
<tr>
  <th>C(county)[T.182]</th>          <td>  -1.6e+04</td> <td> 8180.157</td> <td>   -1.956</td> <td> 0.051</td> <td> -3.2e+04</td> <td>   40.230</td>
</tr>
<tr>
  <th>C(county)[T.183]</th>          <td> 1688.4654</td> <td> 4051.315</td> <td>    0.417</td> <td> 0.677</td> <td>-6253.894</td> <td> 9630.825</td>
</tr>
<tr>
  <th>C(county)[T.184]</th>          <td>-1.566e+04</td> <td> 3739.789</td> <td>   -4.189</td> <td> 0.000</td> <td> -2.3e+04</td> <td>-8333.281</td>
</tr>
<tr>
  <th>C(county)[T.185]</th>          <td>-1.158e+04</td> <td>  1.5e+04</td> <td>   -0.769</td> <td> 0.442</td> <td>-4.11e+04</td> <td> 1.79e+04</td>
</tr>
<tr>
  <th>C(county)[T.186]</th>          <td>-1.279e+04</td> <td> 1.07e+04</td> <td>   -1.198</td> <td> 0.231</td> <td>-3.37e+04</td> <td> 8134.088</td>
</tr>
<tr>
  <th>C(county)[T.187]</th>          <td>-6652.3137</td> <td> 8781.097</td> <td>   -0.758</td> <td> 0.449</td> <td>-2.39e+04</td> <td> 1.06e+04</td>
</tr>
<tr>
  <th>C(county)[T.188]</th>          <td>-1.083e+04</td> <td> 3548.268</td> <td>   -3.053</td> <td> 0.002</td> <td>-1.78e+04</td> <td>-3878.254</td>
</tr>
<tr>
  <th>C(county)[T.189]</th>          <td>-2.122e+04</td> <td> 5407.161</td> <td>   -3.925</td> <td> 0.000</td> <td>-3.18e+04</td> <td>-1.06e+04</td>
</tr>
<tr>
  <th>C(county)[T.190]</th>          <td>-2.661e+04</td> <td> 1.48e+04</td> <td>   -1.803</td> <td> 0.071</td> <td>-5.55e+04</td> <td> 2321.109</td>
</tr>
<tr>
  <th>C(county)[T.191]</th>          <td>-3036.3270</td> <td> 1.92e+04</td> <td>   -0.158</td> <td> 0.874</td> <td>-4.06e+04</td> <td> 3.45e+04</td>
</tr>
<tr>
  <th>C(county)[T.192]</th>          <td> 6940.9690</td> <td> 9281.647</td> <td>    0.748</td> <td> 0.455</td> <td>-1.13e+04</td> <td> 2.51e+04</td>
</tr>
<tr>
  <th>C(county)[T.193]</th>          <td>-9444.8116</td> <td> 1.05e+04</td> <td>   -0.902</td> <td> 0.367</td> <td>   -3e+04</td> <td> 1.11e+04</td>
</tr>
<tr>
  <th>C(county)[T.194]</th>          <td> 2498.3312</td> <td> 1.35e+04</td> <td>    0.185</td> <td> 0.853</td> <td> -2.4e+04</td> <td>  2.9e+04</td>
</tr>
<tr>
  <th>C(county)[T.195]</th>          <td> -2.03e+04</td> <td> 9595.165</td> <td>   -2.116</td> <td> 0.034</td> <td>-3.91e+04</td> <td>-1493.798</td>
</tr>
<tr>
  <th>C(county)[T.196]</th>          <td>-2753.6229</td> <td> 6585.461</td> <td>   -0.418</td> <td> 0.676</td> <td>-1.57e+04</td> <td> 1.02e+04</td>
</tr>
<tr>
  <th>C(county)[T.197]</th>          <td>  1.33e+04</td> <td> 5757.604</td> <td>    2.311</td> <td> 0.021</td> <td> 2015.983</td> <td> 2.46e+04</td>
</tr>
<tr>
  <th>C(county)[T.198]</th>          <td> 7328.9890</td> <td> 7484.437</td> <td>    0.979</td> <td> 0.328</td> <td>-7343.801</td> <td>  2.2e+04</td>
</tr>
<tr>
  <th>C(county)[T.199]</th>          <td>-2.136e+04</td> <td> 8594.063</td> <td>   -2.485</td> <td> 0.013</td> <td>-3.82e+04</td> <td>-4510.853</td>
</tr>
<tr>
  <th>C(county)[T.200]</th>          <td>-7508.9207</td> <td> 3016.843</td> <td>   -2.489</td> <td> 0.013</td> <td>-1.34e+04</td> <td>-1594.581</td>
</tr>
<tr>
  <th>C(county)[T.201]</th>          <td>-2.737e+04</td> <td> 1.51e+04</td> <td>   -1.811</td> <td> 0.070</td> <td> -5.7e+04</td> <td> 2251.151</td>
</tr>
<tr>
  <th>C(county)[T.202]</th>          <td>-1237.8204</td> <td> 2.25e+04</td> <td>   -0.055</td> <td> 0.956</td> <td>-4.54e+04</td> <td> 4.29e+04</td>
</tr>
<tr>
  <th>C(county)[T.203]</th>          <td>-6666.3212</td> <td> 1.53e+04</td> <td>   -0.435</td> <td> 0.664</td> <td>-3.67e+04</td> <td> 2.34e+04</td>
</tr>
<tr>
  <th>C(county)[T.204]</th>          <td>-1.464e+04</td> <td> 9850.437</td> <td>   -1.486</td> <td> 0.137</td> <td>-3.39e+04</td> <td> 4674.099</td>
</tr>
<tr>
  <th>C(county)[T.205]</th>          <td>-1.706e+04</td> <td> 6442.944</td> <td>   -2.648</td> <td> 0.008</td> <td>-2.97e+04</td> <td>-4427.328</td>
</tr>
<tr>
  <th>C(county)[T.206]</th>          <td>-3.733e+04</td> <td> 1.51e+04</td> <td>   -2.465</td> <td> 0.014</td> <td> -6.7e+04</td> <td>-7640.473</td>
</tr>
<tr>
  <th>C(county)[T.209]</th>          <td> 6087.6907</td> <td> 1.35e+04</td> <td>    0.452</td> <td> 0.651</td> <td>-2.03e+04</td> <td> 3.25e+04</td>
</tr>
<tr>
  <th>C(county)[T.210]</th>          <td>-2.578e+04</td> <td> 2.65e+04</td> <td>   -0.973</td> <td> 0.330</td> <td>-7.77e+04</td> <td> 2.61e+04</td>
</tr>
<tr>
  <th>C(county)[T.211]</th>          <td>-1093.8388</td> <td> 7382.081</td> <td>   -0.148</td> <td> 0.882</td> <td>-1.56e+04</td> <td> 1.34e+04</td>
</tr>
<tr>
  <th>C(county)[T.213]</th>          <td>-2.153e+04</td> <td> 2.35e+04</td> <td>   -0.916</td> <td> 0.360</td> <td>-6.76e+04</td> <td> 2.45e+04</td>
</tr>
<tr>
  <th>C(county)[T.214]</th>          <td>-2.351e+04</td> <td> 1.27e+04</td> <td>   -1.858</td> <td> 0.063</td> <td>-4.83e+04</td> <td> 1299.507</td>
</tr>
<tr>
  <th>C(county)[T.215]</th>          <td> -1.66e+04</td> <td> 1.12e+04</td> <td>   -1.488</td> <td> 0.137</td> <td>-3.85e+04</td> <td> 5271.613</td>
</tr>
<tr>
  <th>C(county)[T.216]</th>          <td>-9052.8944</td> <td> 5337.794</td> <td>   -1.696</td> <td> 0.090</td> <td>-1.95e+04</td> <td> 1411.531</td>
</tr>
<tr>
  <th>C(county)[T.217]</th>          <td>-2.914e+04</td> <td> 9643.602</td> <td>   -3.021</td> <td> 0.003</td> <td> -4.8e+04</td> <td>-1.02e+04</td>
</tr>
<tr>
  <th>C(county)[T.218]</th>          <td>-1.642e+04</td> <td> 1.66e+04</td> <td>   -0.987</td> <td> 0.324</td> <td> -4.9e+04</td> <td> 1.62e+04</td>
</tr>
<tr>
  <th>C(county)[T.219]</th>          <td> -482.9429</td> <td> 8190.878</td> <td>   -0.059</td> <td> 0.953</td> <td>-1.65e+04</td> <td> 1.56e+04</td>
</tr>
<tr>
  <th>C(county)[T.220]</th>          <td> 1.038e+04</td> <td> 1.11e+04</td> <td>    0.934</td> <td> 0.350</td> <td>-1.14e+04</td> <td> 3.22e+04</td>
</tr>
<tr>
  <th>C(county)[T.221]</th>          <td> 7271.3058</td> <td> 1.15e+04</td> <td>    0.634</td> <td> 0.526</td> <td>-1.52e+04</td> <td> 2.97e+04</td>
</tr>
<tr>
  <th>C(county)[T.222]</th>          <td>-1.622e+04</td> <td> 1.02e+04</td> <td>   -1.588</td> <td> 0.112</td> <td>-3.63e+04</td> <td> 3804.653</td>
</tr>
<tr>
  <th>C(county)[T.223]</th>          <td>-1.878e+04</td> <td> 5199.813</td> <td>   -3.612</td> <td> 0.000</td> <td> -2.9e+04</td> <td>-8586.505</td>
</tr>
<tr>
  <th>C(county)[T.224]</th>          <td>-9192.1466</td> <td> 1.45e+04</td> <td>   -0.636</td> <td> 0.525</td> <td>-3.75e+04</td> <td> 1.92e+04</td>
</tr>
<tr>
  <th>C(county)[T.225]</th>          <td> 2641.2389</td> <td> 1.98e+04</td> <td>    0.134</td> <td> 0.894</td> <td>-3.61e+04</td> <td> 4.14e+04</td>
</tr>
<tr>
  <th>C(county)[T.226]</th>          <td>-8830.2891</td> <td> 6639.675</td> <td>   -1.330</td> <td> 0.184</td> <td>-2.18e+04</td> <td> 4186.397</td>
</tr>
<tr>
  <th>C(county)[T.227]</th>          <td>-2.143e+04</td> <td> 1.09e+04</td> <td>   -1.970</td> <td> 0.049</td> <td>-4.28e+04</td> <td> -102.683</td>
</tr>
<tr>
  <th>C(county)[T.228]</th>          <td> 3.233e+04</td> <td> 1.71e+04</td> <td>    1.894</td> <td> 0.058</td> <td>-1135.703</td> <td> 6.58e+04</td>
</tr>
<tr>
  <th>C(county)[T.229]</th>          <td>-1.428e+04</td> <td> 1.91e+04</td> <td>   -0.748</td> <td> 0.454</td> <td>-5.17e+04</td> <td> 2.31e+04</td>
</tr>
<tr>
  <th>C(county)[T.230]</th>          <td> -1.28e+04</td> <td> 6264.355</td> <td>   -2.043</td> <td> 0.041</td> <td>-2.51e+04</td> <td> -517.493</td>
</tr>
<tr>
  <th>C(county)[T.231]</th>          <td>-8271.2748</td> <td> 7245.759</td> <td>   -1.142</td> <td> 0.254</td> <td>-2.25e+04</td> <td> 5933.602</td>
</tr>
<tr>
  <th>C(county)[T.232]</th>          <td>-2.299e+04</td> <td> 8519.159</td> <td>   -2.699</td> <td> 0.007</td> <td>-3.97e+04</td> <td>-6289.960</td>
</tr>
<tr>
  <th>C(county)[T.233]</th>          <td>-1.285e+04</td> <td> 8491.101</td> <td>   -1.513</td> <td> 0.130</td> <td>-2.95e+04</td> <td> 3796.614</td>
</tr>
<tr>
  <th>C(county)[T.234]</th>          <td>-1.735e+04</td> <td>  3.1e+04</td> <td>   -0.559</td> <td> 0.576</td> <td>-7.82e+04</td> <td> 4.35e+04</td>
</tr>
<tr>
  <th>C(county)[T.235]</th>          <td>-1.766e+04</td> <td> 3.16e+04</td> <td>   -0.559</td> <td> 0.576</td> <td>-7.96e+04</td> <td> 4.43e+04</td>
</tr>
<tr>
  <th>C(county)[T.236]</th>          <td>-1.217e+04</td> <td> 8349.230</td> <td>   -1.457</td> <td> 0.145</td> <td>-2.85e+04</td> <td> 4200.746</td>
</tr>
<tr>
  <th>C(county)[T.237]</th>          <td>-1.141e+04</td> <td> 4505.618</td> <td>   -2.533</td> <td> 0.011</td> <td>-2.02e+04</td> <td>-2581.176</td>
</tr>
<tr>
  <th>C(county)[T.238]</th>          <td>-1.613e+04</td> <td> 7139.990</td> <td>   -2.258</td> <td> 0.024</td> <td>-3.01e+04</td> <td>-2127.974</td>
</tr>
<tr>
  <th>C(county)[T.239]</th>          <td>-2.712e+04</td> <td> 2.14e+04</td> <td>   -1.266</td> <td> 0.206</td> <td>-6.91e+04</td> <td> 1.49e+04</td>
</tr>
<tr>
  <th>C(county)[T.240]</th>          <td> 6490.6376</td> <td> 9154.156</td> <td>    0.709</td> <td> 0.478</td> <td>-1.15e+04</td> <td> 2.44e+04</td>
</tr>
<tr>
  <th>C(county)[T.241]</th>          <td>-3359.7031</td> <td> 6189.659</td> <td>   -0.543</td> <td> 0.587</td> <td>-1.55e+04</td> <td> 8774.753</td>
</tr>
<tr>
  <th>C(county)[T.242]</th>          <td>-1.613e+04</td> <td> 1.27e+04</td> <td>   -1.272</td> <td> 0.203</td> <td> -4.1e+04</td> <td> 8724.775</td>
</tr>
<tr>
  <th>C(county)[T.243]</th>          <td>-1.788e+04</td> <td> 1.39e+04</td> <td>   -1.286</td> <td> 0.199</td> <td>-4.51e+04</td> <td> 9383.449</td>
</tr>
<tr>
  <th>C(county)[T.244]</th>          <td>-3.071e+04</td> <td> 1.43e+04</td> <td>   -2.150</td> <td> 0.032</td> <td>-5.87e+04</td> <td>-2703.321</td>
</tr>
<tr>
  <th>C(county)[T.245]</th>          <td>-8153.4624</td> <td> 1.35e+04</td> <td>   -0.603</td> <td> 0.547</td> <td>-3.47e+04</td> <td> 1.84e+04</td>
</tr>
<tr>
  <th>C(county)[T.246]</th>          <td> 5281.9970</td> <td> 4036.138</td> <td>    1.309</td> <td> 0.191</td> <td>-2630.610</td> <td> 1.32e+04</td>
</tr>
<tr>
  <th>C(county)[T.247]</th>          <td>-9765.4698</td> <td> 5639.622</td> <td>   -1.732</td> <td> 0.083</td> <td>-2.08e+04</td> <td> 1290.671</td>
</tr>
<tr>
  <th>C(county)[T.248]</th>          <td>  143.0204</td> <td> 8692.204</td> <td>    0.016</td> <td> 0.987</td> <td>-1.69e+04</td> <td> 1.72e+04</td>
</tr>
<tr>
  <th>C(county)[T.249]</th>          <td>-1.476e+04</td> <td> 3.35e+04</td> <td>   -0.440</td> <td> 0.660</td> <td>-8.05e+04</td> <td>  5.1e+04</td>
</tr>
<tr>
  <th>C(county)[T.250]</th>          <td> 1.616e+04</td> <td> 1.05e+04</td> <td>    1.541</td> <td> 0.123</td> <td>-4398.223</td> <td> 3.67e+04</td>
</tr>
<tr>
  <th>C(county)[T.251]</th>          <td>-1.651e+04</td> <td> 9569.822</td> <td>   -1.726</td> <td> 0.084</td> <td>-3.53e+04</td> <td> 2247.701</td>
</tr>
<tr>
  <th>C(county)[T.252]</th>          <td> -1.57e+04</td> <td> 2.01e+04</td> <td>   -0.781</td> <td> 0.435</td> <td>-5.51e+04</td> <td> 2.37e+04</td>
</tr>
<tr>
  <th>C(county)[T.253]</th>          <td>-1.801e+04</td> <td> 1.58e+04</td> <td>   -1.141</td> <td> 0.254</td> <td>-4.89e+04</td> <td> 1.29e+04</td>
</tr>
<tr>
  <th>C(county)[T.254]</th>          <td>-5819.5313</td> <td> 1.24e+04</td> <td>   -0.470</td> <td> 0.638</td> <td>-3.01e+04</td> <td> 1.85e+04</td>
</tr>
<tr>
  <th>C(county)[T.256]</th>          <td>-9352.6145</td> <td> 1.31e+04</td> <td>   -0.712</td> <td> 0.476</td> <td>-3.51e+04</td> <td> 1.64e+04</td>
</tr>
<tr>
  <th>C(county)[T.257]</th>          <td>-1.474e+04</td> <td> 4650.454</td> <td>   -3.170</td> <td> 0.002</td> <td>-2.39e+04</td> <td>-5626.575</td>
</tr>
<tr>
  <th>C(county)[T.258]</th>          <td> -2.95e+04</td> <td> 1.86e+04</td> <td>   -1.587</td> <td> 0.113</td> <td> -6.6e+04</td> <td> 6945.417</td>
</tr>
<tr>
  <th>C(county)[T.259]</th>          <td> 5.662e+04</td> <td> 1.78e+04</td> <td>    3.176</td> <td> 0.002</td> <td> 2.17e+04</td> <td> 9.16e+04</td>
</tr>
<tr>
  <th>C(county)[T.260]</th>          <td>-2.075e+04</td> <td> 1.42e+04</td> <td>   -1.461</td> <td> 0.144</td> <td>-4.86e+04</td> <td> 7093.704</td>
</tr>
<tr>
  <th>C(county)[T.261]</th>          <td>-1.214e+04</td> <td> 9508.704</td> <td>   -1.277</td> <td> 0.202</td> <td>-3.08e+04</td> <td> 6499.043</td>
</tr>
<tr>
  <th>C(county)[T.262]</th>          <td>-1.499e+04</td> <td> 3.16e+04</td> <td>   -0.474</td> <td> 0.635</td> <td>-7.69e+04</td> <td>  4.7e+04</td>
</tr>
<tr>
  <th>C(county)[T.263]</th>          <td> 1.094e+04</td> <td> 1.25e+04</td> <td>    0.872</td> <td> 0.383</td> <td>-1.36e+04</td> <td> 3.55e+04</td>
</tr>
<tr>
  <th>C(county)[T.264]</th>          <td>-2479.7477</td> <td> 1.18e+04</td> <td>   -0.210</td> <td> 0.834</td> <td>-2.57e+04</td> <td> 2.07e+04</td>
</tr>
<tr>
  <th>C(county)[T.265]</th>          <td>-2.203e+04</td> <td> 1.05e+04</td> <td>   -2.105</td> <td> 0.035</td> <td>-4.25e+04</td> <td>-1517.160</td>
</tr>
<tr>
  <th>C(county)[T.266]</th>          <td> 6210.2882</td> <td> 3.35e+04</td> <td>    0.185</td> <td> 0.853</td> <td>-5.95e+04</td> <td> 7.19e+04</td>
</tr>
<tr>
  <th>C(county)[T.267]</th>          <td>-1.138e+04</td> <td> 2.33e+04</td> <td>   -0.488</td> <td> 0.626</td> <td>-5.71e+04</td> <td> 3.44e+04</td>
</tr>
<tr>
  <th>C(county)[T.268]</th>          <td>-2.097e+04</td> <td> 1.51e+04</td> <td>   -1.389</td> <td> 0.165</td> <td>-5.06e+04</td> <td> 8629.225</td>
</tr>
<tr>
  <th>C(county)[T.269]</th>          <td>-1.836e+04</td> <td> 7924.529</td> <td>   -2.317</td> <td> 0.021</td> <td>-3.39e+04</td> <td>-2824.110</td>
</tr>
<tr>
  <th>C(county)[T.270]</th>          <td>-1.361e+04</td> <td> 1.72e+04</td> <td>   -0.789</td> <td> 0.430</td> <td>-4.74e+04</td> <td> 2.02e+04</td>
</tr>
<tr>
  <th>C(county)[T.271]</th>          <td>-1.204e+04</td> <td> 1.55e+04</td> <td>   -0.777</td> <td> 0.437</td> <td>-4.24e+04</td> <td> 1.84e+04</td>
</tr>
<tr>
  <th>C(county)[T.272]</th>          <td>-1.485e+04</td> <td> 8880.399</td> <td>   -1.672</td> <td> 0.095</td> <td>-3.23e+04</td> <td> 2561.281</td>
</tr>
<tr>
  <th>C(county)[T.273]</th>          <td>-1.149e+04</td> <td> 2.63e+04</td> <td>   -0.438</td> <td> 0.662</td> <td> -6.3e+04</td> <td>    4e+04</td>
</tr>
<tr>
  <th>C(county)[T.274]</th>          <td>-9891.3781</td> <td> 4694.196</td> <td>   -2.107</td> <td> 0.035</td> <td>-1.91e+04</td> <td> -688.687</td>
</tr>
<tr>
  <th>C(county)[T.275]</th>          <td>-5173.7930</td> <td> 1.15e+04</td> <td>   -0.449</td> <td> 0.653</td> <td>-2.77e+04</td> <td> 1.74e+04</td>
</tr>
<tr>
  <th>C(county)[T.276]</th>          <td>-1.966e+04</td> <td> 1.66e+04</td> <td>   -1.182</td> <td> 0.237</td> <td>-5.22e+04</td> <td> 1.29e+04</td>
</tr>
<tr>
  <th>C(county)[T.277]</th>          <td>-3.402e+04</td> <td> 2.86e+04</td> <td>   -1.188</td> <td> 0.235</td> <td>-9.01e+04</td> <td> 2.21e+04</td>
</tr>
<tr>
  <th>C(county)[T.278]</th>          <td> 2322.2439</td> <td>  1.9e+04</td> <td>    0.122</td> <td> 0.903</td> <td>-3.49e+04</td> <td> 3.95e+04</td>
</tr>
<tr>
  <th>C(county)[T.279]</th>          <td>-1.119e+04</td> <td> 1.84e+04</td> <td>   -0.609</td> <td> 0.543</td> <td>-4.72e+04</td> <td> 2.48e+04</td>
</tr>
<tr>
  <th>C(county)[T.280]</th>          <td>-1.345e+04</td> <td> 6306.646</td> <td>   -2.133</td> <td> 0.033</td> <td>-2.58e+04</td> <td>-1085.930</td>
</tr>
<tr>
  <th>C(county)[T.281]</th>          <td>-8403.4354</td> <td> 2.99e+04</td> <td>   -0.281</td> <td> 0.778</td> <td>-6.69e+04</td> <td> 5.01e+04</td>
</tr>
<tr>
  <th>C(county)[T.282]</th>          <td>-3681.0429</td> <td>  1.2e+04</td> <td>   -0.307</td> <td> 0.759</td> <td>-2.72e+04</td> <td> 1.99e+04</td>
</tr>
<tr>
  <th>C(county)[T.283]</th>          <td>-5339.8789</td> <td> 9936.127</td> <td>   -0.537</td> <td> 0.591</td> <td>-2.48e+04</td> <td> 1.41e+04</td>
</tr>
<tr>
  <th>C(county)[T.284]</th>          <td>-1.452e+04</td> <td> 8179.287</td> <td>   -1.775</td> <td> 0.076</td> <td>-3.06e+04</td> <td> 1519.240</td>
</tr>
<tr>
  <th>C(county)[T.285]</th>          <td> -3.43e+04</td> <td> 2.13e+04</td> <td>   -1.613</td> <td> 0.107</td> <td> -7.6e+04</td> <td> 7382.687</td>
</tr>
<tr>
  <th>C(county)[T.286]</th>          <td> 7684.0660</td> <td> 1.16e+04</td> <td>    0.664</td> <td> 0.507</td> <td> -1.5e+04</td> <td> 3.04e+04</td>
</tr>
<tr>
  <th>C(county)[T.287]</th>          <td>-1.775e+04</td> <td> 5134.756</td> <td>   -3.456</td> <td> 0.001</td> <td>-2.78e+04</td> <td>-7680.041</td>
</tr>
<tr>
  <th>C(county)[T.288]</th>          <td> 2038.4699</td> <td> 1.76e+04</td> <td>    0.116</td> <td> 0.908</td> <td>-3.26e+04</td> <td> 3.66e+04</td>
</tr>
<tr>
  <th>C(county)[T.289]</th>          <td>-8041.0146</td> <td> 1.11e+04</td> <td>   -0.726</td> <td> 0.468</td> <td>-2.97e+04</td> <td> 1.37e+04</td>
</tr>
<tr>
  <th>C(county)[T.290]</th>          <td>-1.581e+04</td> <td> 7099.249</td> <td>   -2.227</td> <td> 0.026</td> <td>-2.97e+04</td> <td>-1889.232</td>
</tr>
<tr>
  <th>C(county)[T.291]</th>          <td>-7663.1814</td> <td> 1.35e+04</td> <td>   -0.567</td> <td> 0.571</td> <td>-3.42e+04</td> <td> 1.88e+04</td>
</tr>
<tr>
  <th>C(county)[T.292]</th>          <td>-1.567e+04</td> <td> 7319.153</td> <td>   -2.141</td> <td> 0.032</td> <td>   -3e+04</td> <td>-1323.652</td>
</tr>
<tr>
  <th>C(county)[T.293]</th>          <td>-5825.2555</td> <td> 1.34e+04</td> <td>   -0.433</td> <td> 0.665</td> <td>-3.22e+04</td> <td> 2.05e+04</td>
</tr>
<tr>
  <th>C(county)[T.294]</th>          <td> 1.947e+04</td> <td> 9840.528</td> <td>    1.978</td> <td> 0.048</td> <td>  177.105</td> <td> 3.88e+04</td>
</tr>
<tr>
  <th>C(county)[T.295]</th>          <td> -1.75e+04</td> <td> 1.76e+04</td> <td>   -0.996</td> <td> 0.319</td> <td> -5.2e+04</td> <td>  1.7e+04</td>
</tr>
<tr>
  <th>C(county)[T.296]</th>          <td>-1096.1249</td> <td>  1.8e+04</td> <td>   -0.061</td> <td> 0.951</td> <td>-3.64e+04</td> <td> 3.42e+04</td>
</tr>
<tr>
  <th>C(county)[T.297]</th>          <td>-1.141e+04</td> <td> 4502.234</td> <td>   -2.535</td> <td> 0.011</td> <td>-2.02e+04</td> <td>-2586.102</td>
</tr>
<tr>
  <th>C(county)[T.298]</th>          <td>-8732.4700</td> <td> 2.87e+04</td> <td>   -0.304</td> <td> 0.761</td> <td> -6.5e+04</td> <td> 4.75e+04</td>
</tr>
<tr>
  <th>C(county)[T.299]</th>          <td> -1.74e+04</td> <td> 2.99e+04</td> <td>   -0.583</td> <td> 0.560</td> <td>-7.59e+04</td> <td> 4.11e+04</td>
</tr>
<tr>
  <th>C(county)[T.300]</th>          <td>-1.986e+04</td> <td> 1.04e+04</td> <td>   -1.907</td> <td> 0.057</td> <td>-4.03e+04</td> <td>  560.482</td>
</tr>
<tr>
  <th>C(county)[T.301]</th>          <td>-4.329e+04</td> <td> 3.24e+04</td> <td>   -1.336</td> <td> 0.182</td> <td>-1.07e+05</td> <td> 2.03e+04</td>
</tr>
<tr>
  <th>C(county)[T.302]</th>          <td> 4581.0131</td> <td> 7593.047</td> <td>    0.603</td> <td> 0.546</td> <td>-1.03e+04</td> <td> 1.95e+04</td>
</tr>
<tr>
  <th>C(county)[T.303]</th>          <td>-1.484e+04</td> <td> 7473.001</td> <td>   -1.985</td> <td> 0.047</td> <td>-2.95e+04</td> <td> -186.892</td>
</tr>
<tr>
  <th>C(county)[T.304]</th>          <td>-2.222e+04</td> <td> 8772.347</td> <td>   -2.533</td> <td> 0.011</td> <td>-3.94e+04</td> <td>-5022.926</td>
</tr>
<tr>
  <th>C(county)[T.305]</th>          <td>-2514.2672</td> <td> 7217.330</td> <td>   -0.348</td> <td> 0.728</td> <td>-1.67e+04</td> <td> 1.16e+04</td>
</tr>
<tr>
  <th>C(county)[T.306]</th>          <td>-2.336e+04</td> <td> 1.99e+04</td> <td>   -1.174</td> <td> 0.240</td> <td>-6.24e+04</td> <td> 1.57e+04</td>
</tr>
<tr>
  <th>C(county)[T.307]</th>          <td>-1.116e+04</td> <td> 9796.527</td> <td>   -1.139</td> <td> 0.255</td> <td>-3.04e+04</td> <td> 8045.695</td>
</tr>
<tr>
  <th>C(county)[T.308]</th>          <td> 8.973e+04</td> <td> 1.66e+04</td> <td>    5.411</td> <td> 0.000</td> <td> 5.72e+04</td> <td> 1.22e+05</td>
</tr>
<tr>
  <th>C(county)[T.309]</th>          <td>-1.179e+04</td> <td> 5120.504</td> <td>   -2.302</td> <td> 0.021</td> <td>-2.18e+04</td> <td>-1747.726</td>
</tr>
<tr>
  <th>C(county)[T.310]</th>          <td>-1.268e+04</td> <td> 3.35e+04</td> <td>   -0.378</td> <td> 0.705</td> <td>-7.84e+04</td> <td> 5.31e+04</td>
</tr>
<tr>
  <th>C(county)[T.311]</th>          <td>-1.624e+04</td> <td> 1.01e+04</td> <td>   -1.611</td> <td> 0.107</td> <td> -3.6e+04</td> <td> 3524.476</td>
</tr>
<tr>
  <th>C(county)[T.312]</th>          <td>-9191.1488</td> <td> 9873.286</td> <td>   -0.931</td> <td> 0.352</td> <td>-2.85e+04</td> <td> 1.02e+04</td>
</tr>
<tr>
  <th>C(county)[T.313]</th>          <td>-1.765e+04</td> <td> 4.28e+04</td> <td>   -0.412</td> <td> 0.680</td> <td>-1.02e+05</td> <td> 6.63e+04</td>
</tr>
<tr>
  <th>C(county)[T.314]</th>          <td>-1.793e+04</td> <td> 7170.454</td> <td>   -2.501</td> <td> 0.012</td> <td> -3.2e+04</td> <td>-3875.671</td>
</tr>
<tr>
  <th>C(county)[T.315]</th>          <td>  879.4379</td> <td> 1.04e+04</td> <td>    0.084</td> <td> 0.933</td> <td>-1.96e+04</td> <td> 2.13e+04</td>
</tr>
<tr>
  <th>C(county)[T.316]</th>          <td>-5807.9640</td> <td> 6758.678</td> <td>   -0.859</td> <td> 0.390</td> <td>-1.91e+04</td> <td> 7442.020</td>
</tr>
<tr>
  <th>C(county)[T.317]</th>          <td> 1.794e+04</td> <td> 9335.924</td> <td>    1.922</td> <td> 0.055</td> <td> -362.354</td> <td> 3.62e+04</td>
</tr>
<tr>
  <th>C(county)[T.318]</th>          <td>-4980.2142</td> <td> 8582.095</td> <td>   -0.580</td> <td> 0.562</td> <td>-2.18e+04</td> <td> 1.18e+04</td>
</tr>
<tr>
  <th>C(county)[T.319]</th>          <td> 1051.3237</td> <td> 1.42e+04</td> <td>    0.074</td> <td> 0.941</td> <td>-2.68e+04</td> <td> 2.89e+04</td>
</tr>
<tr>
  <th>C(county)[T.320]</th>          <td>-1.431e+04</td> <td>  1.5e+04</td> <td>   -0.951</td> <td> 0.341</td> <td>-4.38e+04</td> <td> 1.52e+04</td>
</tr>
<tr>
  <th>C(county)[T.321]</th>          <td>-1.684e+04</td> <td> 6968.208</td> <td>   -2.416</td> <td> 0.016</td> <td>-3.05e+04</td> <td>-3176.799</td>
</tr>
<tr>
  <th>C(county)[T.322]</th>          <td> -406.6903</td> <td> 6523.846</td> <td>   -0.062</td> <td> 0.950</td> <td>-1.32e+04</td> <td> 1.24e+04</td>
</tr>
<tr>
  <th>C(county)[T.323]</th>          <td>-1.853e+04</td> <td> 5726.625</td> <td>   -3.236</td> <td> 0.001</td> <td>-2.98e+04</td> <td>-7302.079</td>
</tr>
<tr>
  <th>C(county)[T.324]</th>          <td>-2501.1256</td> <td> 7866.013</td> <td>   -0.318</td> <td> 0.751</td> <td>-1.79e+04</td> <td> 1.29e+04</td>
</tr>
<tr>
  <th>C(county)[T.325]</th>          <td>-1.951e+04</td> <td> 2.24e+04</td> <td>   -0.873</td> <td> 0.383</td> <td>-6.33e+04</td> <td> 2.43e+04</td>
</tr>
<tr>
  <th>has_college</th>               <td> 1.325e+04</td> <td>  742.630</td> <td>   17.843</td> <td> 0.000</td> <td> 1.18e+04</td> <td> 1.47e+04</td>
</tr>
<tr>
  <th>female</th>                    <td>-8657.2875</td> <td>  609.011</td> <td>  -14.215</td> <td> 0.000</td> <td>-9851.217</td> <td>-7463.358</td>
</tr>
</table>
<table class="simpletable">
<tr>
  <th>Omnibus:</th>       <td>2414.039</td> <th>  Durbin-Watson:     </th> <td>   1.981</td>
</tr>
<tr>
  <th>Prob(Omnibus):</th>  <td> 0.000</td>  <th>  Jarque-Bera (JB):  </th> <td>22245.534</td>
</tr>
<tr>
  <th>Skew:</th>           <td> 1.945</td>  <th>  Prob(JB):          </th> <td>    0.00</td>
</tr>
<tr>
  <th>Kurtosis:</th>       <td>12.242</td>  <th>  Cond. No.          </th> <td>    198.</td>
</tr>
</table><br/><br/>Notes:<br/>[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.</div>
</div>
</div>
<div class="section" id="Exercise-15">
<h3>Exercise 15<a class="headerlink" href="#Exercise-15" title="Permalink to this headline">¶</a></h3>
<p>If you stopped matching after Iteration 2 back in Exercise 10, you may be wondering if that was a good choice! Let’s check by restricting our attention to ONLY exact matches (<code class="docutils literal notranslate"><span class="pre">iteration</span> <span class="pre">=</span> <span class="pre">1</span></code>). Run that match.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[30]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">model2</span> <span class="o">=</span> <span class="n">dame_flame</span><span class="o">.</span><span class="n">matching</span><span class="o">.</span><span class="n">DAME</span><span class="p">(</span>
    <span class="n">repeats</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">want_pe</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">early_stop_iterations</span><span class="o">=</span><span class="mi">1</span>
<span class="p">)</span>
<span class="n">model2</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span>
    <span class="n">for_matching</span><span class="p">,</span>
    <span class="n">treatment_column_name</span><span class="o">=</span><span class="s2">&quot;has_college&quot;</span><span class="p">,</span>
    <span class="n">outcome_column_name</span><span class="o">=</span><span class="s2">&quot;annual_earnings&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">result2</span> <span class="o">=</span> <span class="n">model2</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">for_matching</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Iteration number:  1
        Number of matched groups formed in total:  370
        Unmatched treated units:  644 out of a total of  1150 treated units
        Unmatched control units:  3187 out of a total of  4365 control units
        Predictive error of covariates chosen this iteration:  0
        Number of matches made in this iteration:  1684
        Number of matches made so far:  1684
        In this iteration, the covariates dropped are:  set()
1684 units matched. We stopped before doing iteration number:  1
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[31]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">matched_data2</span> <span class="o">=</span> <span class="n">get_dataframe</span><span class="p">(</span><span class="n">model2</span><span class="p">,</span> <span class="n">result2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
renormalization param: 2.3280632411067192
</pre></div></div>
</div>
</div>
<div class="section" id="Exercise-16">
<h3>Exercise 16<a class="headerlink" href="#Exercise-16" title="Permalink to this headline">¶</a></h3>
<p>Now use a weighted linear regression on your matched data to regress annual earnings on <em>just</em> having a college eduction. Is that different from what you had when you allowed more low quality matches?</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[32]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">smf</span><span class="o">.</span><span class="n">wls</span><span class="p">(</span>
    <span class="s2">&quot;annual_earnings ~ has_college&quot;</span><span class="p">,</span> <span class="n">matched_data2</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="n">matched_data2</span><span class="p">[</span><span class="s2">&quot;weights&quot;</span><span class="p">]</span>
<span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[32]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<table class="simpletable">
<caption>WLS Regression Results</caption>
<tr>
  <th>Dep. Variable:</th>     <td>annual_earnings</td> <th>  R-squared:         </th> <td>   0.049</td>
</tr>
<tr>
  <th>Model:</th>                   <td>WLS</td>       <th>  Adj. R-squared:    </th> <td>   0.048</td>
</tr>
<tr>
  <th>Method:</th>             <td>Least Squares</td>  <th>  F-statistic:       </th> <td>   86.65</td>
</tr>
<tr>
  <th>Date:</th>             <td>Tue, 23 Feb 2021</td> <th>  Prob (F-statistic):</th> <td>3.92e-20</td>
</tr>
<tr>
  <th>Time:</th>                 <td>09:39:29</td>     <th>  Log-Likelihood:    </th> <td> -19512.</td>
</tr>
<tr>
  <th>No. Observations:</th>      <td>  1684</td>      <th>  AIC:               </th> <td>3.903e+04</td>
</tr>
<tr>
  <th>Df Residuals:</th>          <td>  1682</td>      <th>  BIC:               </th> <td>3.904e+04</td>
</tr>
<tr>
  <th>Df Model:</th>              <td>     1</td>      <th>                     </th>     <td> </td>
</tr>
<tr>
  <th>Covariance Type:</th>      <td>nonrobust</td>    <th>                     </th>     <td> </td>
</tr>
</table>
<table class="simpletable">
<tr>
       <td></td>          <th>coef</th>     <th>std err</th>      <th>t</th>      <th>P>|t|</th>  <th>[0.025</th>    <th>0.975]</th>
</tr>
<tr>
  <th>Intercept</th>   <td> 3.914e+04</td> <td>  664.386</td> <td>   58.907</td> <td> 0.000</td> <td> 3.78e+04</td> <td> 4.04e+04</td>
</tr>
<tr>
  <th>has_college</th> <td> 1.128e+04</td> <td> 1212.039</td> <td>    9.308</td> <td> 0.000</td> <td> 8904.805</td> <td> 1.37e+04</td>
</tr>
</table>
<table class="simpletable">
<tr>
  <th>Omnibus:</th>       <td>855.250</td> <th>  Durbin-Watson:     </th> <td>   2.037</td>
</tr>
<tr>
  <th>Prob(Omnibus):</th> <td> 0.000</td>  <th>  Jarque-Bera (JB):  </th> <td>6653.000</td>
</tr>
<tr>
  <th>Skew:</th>          <td> 2.256</td>  <th>  Prob(JB):          </th> <td>    0.00</td>
</tr>
<tr>
  <th>Kurtosis:</th>      <td>11.629</td>  <th>  Cond. No.          </th> <td>    2.42</td>
</tr>
</table><br/><br/>Notes:<br/>[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.</div>
</div>
</div>
</div>
<div class="section" id="Other-Forms-of-Matching">
<h2>Other Forms of Matching<a class="headerlink" href="#Other-Forms-of-Matching" title="Permalink to this headline">¶</a></h2>
<p>OK, hopefully this gives you a taste of matching! There are, of course, <em>many</em> other permutations to be aware of though.</p>
<ul class="simple">
<li><p>Matching with replacement. In this exercise, we set <code class="docutils literal notranslate"><span class="pre">repeat=False</span></code>, so each observation could only end up in our final dataset once. However, if we use <code class="docutils literal notranslate"><span class="pre">repeat=True</span></code>, if an untreated observation is the closest observation to multiple treated observations, it may get put in the dataset multiple times. We can still use this dataset in <em>almost</em> the same way, though, except we have to make use of weights so that if an observation appears, say, twice, each observation has a weight that’s 1/2
the weight of an observation only appearing once.</p></li>
<li><p>Matching with continuous variables: DAME is used for exact matching, but if you have lots of continuous variables, you can also match on those. In fact, the Almost Exact Matching Lab also has a library called <a class="reference external" href="https://almost-matching-exactly.github.io/MALTS/">MALTS</a> that will do matching with continuous variables. That package does something <em>like</em> Mahalanobis Distance matching, but ulike Mahalanobis, which calculates the distance between observations in terms of the difference in all the
matching variables normalized by each matching variable’s standard deviation, MALTS does something much more clever. (Here’s <a class="reference external" href="https://arxiv.org/abs/1811.07415">the paper</a> describing the technique if you want all the details). Basically, it figures out how well each matching variable predicts our outcome <span class="math notranslate nohighlight">\(Y\)</span>, then weights the different variables by their predictive power instead of just normalizing by something arbitrary like their standard deviation. As a result, final matches will
prioritize matching more closely on variables that are outcome-relevant. In addition, when it sees a categorical variable, it recognizes that and only pairs observations when they are an exact match on that categorical variable.</p></li>
<li><p>If you’re dataset is huge, use <code class="docutils literal notranslate"><span class="pre">FLAME</span></code>: this dataset is small, but if you have lots of observations and lots of matching variable, the computational complexity of this task explodes, so the AEML created FLAME, which works with millions of observations at only a small cost to match quality.</p></li>
</ul>
</div>
<div class="section" id="Absolutely-positively-need-the-solutions?">
<h2>Absolutely positively need the solutions?<a class="headerlink" href="#Absolutely-positively-need-the-solutions?" title="Permalink to this headline">¶</a></h2>
<p><em>Don’t use this link until you’ve really, really spent time struggling with your code!</em> Doing so only results in you cheating yourself.</p>
<p><a class="reference internal" href="../solutions_warning.html"><span class="doc">Link</span></a></p>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">Unifying DS</a></h1>








<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../class_schedule.html">CLASS SCHEDULE</a></li>
</ul>
<p class="caption"><span class="caption-text">QUESTIONS</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../taxonomy_of_questions.html">Taxonomy of Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../moving_from_problems_to_questions.html">From Problems to Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../descriptive_questions.html">Discretion and Description</a></li>
<li class="toctree-l1"><a class="reference internal" href="../limitations_of_ATE.html">Limitations of Experiments</a></li>
</ul>
<p class="caption"><span class="caption-text">METHODS</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../interpreting_indicator_vars.html">Indicator Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fixed_effects.html">Fixed Effects</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Nick Eubank.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.5.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/exercises/solutions_matching.ipynb.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-151397036-1']);
      _gaq.push(['_setDomainName', 'none']);
      _gaq.push(['_setAllowLinker', true]);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
    
  </body>
</html>